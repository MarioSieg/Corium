/*

                                Apache License
                           Version 2.0, January 2004
                        http://www.apache.org/licenses/

   TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION

   1. Definitions.

      "License" shall mean the terms and conditions for use, reproduction,
      and distribution as defined by Sections 1 through 9 of this document.

      "Licensor" shall mean the copyright owner or entity authorized by
      the copyright owner that is granting the License.

      "Legal Entity" shall mean the union of the acting entity and all
      other entities that control, are controlled by, or are under common
      control with that entity. For the purposes of this definition,
      "control" means (i) the power, direct or indirect, to cause the
      direction or management of such entity, whether by contract or
      otherwise, or (ii) ownership of fifty percent (50%) or more of the
      outstanding shares, or (iii) beneficial ownership of such entity.

      "You" (or "Your") shall mean an individual or Legal Entity
      exercising permissions granted by this License.

      "Source" form shall mean the preferred form for making modifications,
      including but not limited to software source code, documentation
      source, and configuration files.

      "Object" form shall mean any form resulting from mechanical
      transformation or translation of a Source form, including but
      not limited to compiled object code, generated documentation,
      and conversions to other media types.

      "Work" shall mean the work of authorship, whether in Source or
      Object form, made available under the License, as indicated by a
      copyright notice that is included in or attached to the work
      (an example is provided in the Appendix below).

      "Derivative Works" shall mean any work, whether in Source or Object
      form, that is based on (or derived from) the Work and for which the
      editorial revisions, annotations, elaborations, or other modifications
      represent, as a whole, an original work of authorship. For the purposes
      of this License, Derivative Works shall not include works that remain
      separable from, or merely link (or bind by name) to the interfaces of,
      the Work and Derivative Works thereof.

      "Contribution" shall mean any work of authorship, including
      the original version of the Work and any modifications or additions
      to that Work or Derivative Works thereof, that is intentionally
      submitted to Licensor for inclusion in the Work by the copyright owner
      or by an individual or Legal Entity authorized to submit on behalf of
      the copyright owner. For the purposes of this definition, "submitted"
      means any form of electronic, verbal, or written communication sent
      to the Licensor or its representatives, including but not limited to
      communication on electronic mailing lists, source code control systems,
      and issue tracking systems that are managed by, or on behalf of, the
      Licensor for the purpose of discussing and improving the Work, but
      excluding communication that is conspicuously marked or otherwise
      designated in writing by the copyright owner as "Not a Contribution."

      "Contributor" shall mean Licensor and any individual or Legal Entity
      on behalf of whom a Contribution has been received by Licensor and
      subsequently incorporated within the Work.

   2. Grant of Copyright License. Subject to the terms and conditions of
      this License, each Contributor hereby grants to You a perpetual,
      worldwide, non-exclusive, no-charge, royalty-free, irrevocable
      copyright license to reproduce, prepare Derivative Works of,
      publicly display, publicly perform, sublicense, and distribute the
      Work and such Derivative Works in Source or Object form.

   3. Grant of Patent License. Subject to the terms and conditions of
      this License, each Contributor hereby grants to You a perpetual,
      worldwide, non-exclusive, no-charge, royalty-free, irrevocable
      (except as stated in this section) patent license to make, have made,
      use, offer to sell, sell, import, and otherwise transfer the Work,
      where such license applies only to those patent claims licensable
      by such Contributor that are necessarily infringed by their
      Contribution(s) alone or by combination of their Contribution(s)
      with the Work to which such Contribution(s) was submitted. If You
      institute patent litigation against any entity (including a
      cross-claim or counterclaim in a lawsuit) alleging that the Work
      or a Contribution incorporated within the Work constitutes direct
      or contributory patent infringement, then any patent licenses
      granted to You under this License for that Work shall terminate
      as of the date such litigation is filed.

   4. Redistribution. You may reproduce and distribute copies of the
      Work or Derivative Works thereof in any medium, with or without
      modifications, and in Source or Object form, provided that You
      meet the following conditions:

      (a) You must give any other recipients of the Work or
          Derivative Works a copy of this License; and

      (b) You must cause any modified files to carry prominent notices
          stating that You changed the files; and

      (c) You must retain, in the Source form of any Derivative Works
          that You distribute, all copyright, patent, trademark, and
          attribution notices from the Source form of the Work,
          excluding those notices that do not pertain to any part of
          the Derivative Works; and

      (d) If the Work includes a "NOTICE" text file as part of its
          distribution, then any Derivative Works that You distribute must
          include a readable copy of the attribution notices contained
          within such NOTICE file, excluding those notices that do not
          pertain to any part of the Derivative Works, in at least one
          of the following places: within a NOTICE text file distributed
          as part of the Derivative Works; within the Source form or
          documentation, if provided along with the Derivative Works; or,
          within a display generated by the Derivative Works, if and
          wherever such third-party notices normally appear. The contents
          of the NOTICE file are for informational purposes only and
          do not modify the License. You may add Your own attribution
          notices within Derivative Works that You distribute, alongside
          or as an addendum to the NOTICE text from the Work, provided
          that such additional attribution notices cannot be construed
          as modifying the License.

      You may add Your own copyright statement to Your modifications and
      may provide additional or different license terms and conditions
      for use, reproduction, or distribution of Your modifications, or
      for any such Derivative Works as a whole, provided Your use,
      reproduction, and distribution of the Work otherwise complies with
      the conditions stated in this License.

   5. Submission of Contributions. Unless You explicitly state otherwise,
      any Contribution intentionally submitted for inclusion in the Work
      by You to the Licensor shall be under the terms and conditions of
      this License, without any additional terms or conditions.
      Notwithstanding the above, nothing herein shall supersede or modify
      the terms of any separate license agreement you may have executed
      with Licensor regarding such Contributions.

   6. Trademarks. This License does not grant permission to use the trade
      names, trademarks, service marks, or product names of the Licensor,
      except as required for reasonable and customary use in describing the
      origin of the Work and reproducing the content of the NOTICE file.

   7. Disclaimer of Warranty. Unless required by applicable law or
      agreed to in writing, Licensor provides the Work (and each
      Contributor provides its Contributions) on an "AS IS" BASIS,
      WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
      implied, including, without limitation, any warranties or conditions
      of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A
      PARTICULAR PURPOSE. You are solely responsible for determining the
      appropriateness of using or redistributing the Work and assume any
      risks associated with Your exercise of permissions under this License.

   8. Limitation of Liability. In no event and under no legal theory,
      whether in tort (including negligence), contract, or otherwise,
      unless required by applicable law (such as deliberate and grossly
      negligent acts) or agreed to in writing, shall any Contributor be
      liable to You for damages, including any direct, indirect, special,
      incidental, or consequential damages of any character arising as a
      result of this License or out of the use or inability to use the
      Work (including but not limited to damages for loss of goodwill,
      work stoppage, computer failure or malfunction, or any and all
      other commercial damages or losses), even if such Contributor
      has been advised of the possibility of such damages.

   9. Accepting Warranty or Additional Liability. While redistributing
      the Work or Derivative Works thereof, You may choose to offer,
      and charge a fee for, acceptance of support, warranty, indemnity,
      or other liability obligations and/or rights consistent with this
      License. However, in accepting such obligations, You may act only
      on Your own behalf and on Your sole responsibility, not on behalf
      of any other Contributor, and only if You agree to indemnify,
      defend, and hold each Contributor harmless for any liability
      incurred by, or claims asserted against, such Contributor by reason
      of your accepting any such warranty or additional liability.

   END OF TERMS AND CONDITIONS

   APPENDIX: How to apply the Apache License to your work.

      To apply the Apache License to your work, attach the following
      boilerplate notice, with the fields enclosed by brackets "[]"
      replaced with your own identifying information. (Don't include
      the brackets!)  The text should be enclosed in the appropriate
      comment syntax for the file format. We also recommend that a
      file or class name and description of purpose be included on the
      same "printed page" as the copyright notice for easier
      identification within third-party archives.

   Copyright 2020 Mario Sieg <support@kerbogames.com>

   Licensed under the Apache License, Version 2.0 (the "License");
   you may not use this file except in compliance with the License.
   You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.

*/

use std::{
    cmp::{max, Ordering},
    default::Default,
    fmt::{self, Debug},
    hash::{Hash, Hasher},
    num::Wrapping as Wra,
    path::PathBuf,
};

#[cfg(feature = "config_file")]
use serde::{Deserialize, Serialize};
#[cfg(feature = "config_file")]
use serde_json as json;
#[cfg(feature = "config_file")]
use std::{fs, path::Path};

#[allow(non_camel_case_types)]
#[derive(Copy)]
pub struct MT19937_64 {
    idx: usize,
    state: [Wra<u64>; Self::NN],
}

impl MT19937_64 {
    pub const NN: usize = 312;
    pub const MM: usize = 156;
    pub const ONE: Wra<u64> = Wra(1);
    pub const MATRIX_A: Wra<u64> = Wra(0xB5026F5AA96619E9);
    pub const UM: Wra<u64> = Wra(0xFFFFFFFF80000000);
    pub const LM: Wra<u64> = Wra(0x7FFFFFFF);
    pub const UNINITIALIZED: MT19937_64 = MT19937_64 {
        idx: 0,
        state: [Wra(0); Self::NN],
    };

    pub fn from_seed_u64(seed: u64) -> MT19937_64 {
        let mut mt = Self::UNINITIALIZED;
        mt.reseed_u64(seed);
        mt
    }

    pub fn reseed_u64(&mut self, seed: u64) {
        self.idx = Self::NN;
        self.state[0] = Wra(seed);
        for i in 1..Self::NN {
            self.state[i] = Wra(6364136223846793005)
                * (self.state[i - 1] ^ (self.state[i - 1] >> 62))
                + Wra(i as u64);
        }
    }

    pub fn from_seed(seed: &[u64]) -> MT19937_64 {
        let mut mt = Self::UNINITIALIZED;
        mt.reseed(seed);
        mt
    }

    pub fn reseed(&mut self, key: &[u64]) {
        self.reseed_u64(19650218u64);
        let mut i = 1;
        let mut j = 0;
        for _ in 0..max(Self::NN, key.len()) {
            self.state[i] = (self.state[i]
                ^ ((self.state[i - 1] ^ (self.state[i - 1] >> 62)) * Wra(3935559000370003845)))
                + Wra(key[j])
                + Wra(j as u64);
            i += 1;
            if i >= Self::NN {
                self.state[0] = self.state[Self::NN - 1];
                i = 1;
            }
            j += 1;
            if j >= key.len() {
                j = 0;
            }
        }
        for _ in 0..Self::NN - 1 {
            self.state[i] = (self.state[i]
                ^ ((self.state[i - 1] ^ (self.state[i - 1] >> 62)) * Wra(2862933555777941757)))
                - Wra(i as u64);
            i += 1;
            if i >= Self::NN {
                self.state[0] = self.state[Self::NN - 1];
                i = 1;
            }
        }
        self.state[0] = Wra(1 << 63);
    }

    pub fn next_u32(&mut self) -> u32 {
        self.next_u64() as u32
    }

    pub fn next_u64(&mut self) -> u64 {
        debug_assert_ne!(self.idx, 0);
        if self.idx >= Self::NN {
            self.fill_next_state();
        }
        let Wra(x) = self.state[self.idx];
        self.idx += 1;
        Self::temper(x)
    }

    pub fn fill_next_state(&mut self) {
        for i in 0..Self::NN - Self::MM {
            let x = (self.state[i] & Self::UM) | (self.state[i + 1] & Self::LM);
            self.state[i] =
                self.state[i + Self::MM] ^ (x >> 1) ^ ((x & Self::ONE) * Self::MATRIX_A);
        }
        for i in Self::NN - Self::MM..Self::NN - 1 {
            let x = (self.state[i] & Self::UM) | (self.state[i + 1] & Self::LM);
            self.state[i] =
                self.state[i + Self::MM - Self::NN] ^ (x >> 1) ^ ((x & Self::ONE) * Self::MATRIX_A);
        }
        let x = (self.state[Self::NN - 1] & Self::UM) | (self.state[0] & Self::LM);
        self.state[Self::NN - 1] =
            self.state[Self::MM - 1] ^ (x >> 1) ^ ((x & Self::ONE) * Self::MATRIX_A);
        self.idx = 0;
    }

    pub fn recover(samples: &[u64]) -> MT19937_64 {
        assert_eq!(samples.len(), Self::NN);
        let mut mt = Self::UNINITIALIZED;
        for (in_, out) in Iterator::zip(samples.iter(), mt.state.iter_mut()) {
            *out = Wra(Self::untemper(*in_));
        }
        mt.idx = Self::NN;
        mt
    }

    #[inline]
    fn temper(mut x: u64) -> u64 {
        x ^= (x >> 29) & 0x5555555555555555;
        x ^= (x << 17) & 0x71D67FFFEDA60000;
        x ^= (x << 37) & 0xFFF7EEE000000000;
        x ^= x >> 43;
        x
    }

    #[inline]
    fn untemper(mut x: u64) -> u64 {
        x ^= x >> 43;
        x ^= (x << 37) & 0xFFF7EEE000000000;
        x ^= (x << 17) & 0x00000003eda60000;
        x ^= (x << 17) & 0x00067ffc00000000;
        x ^= (x << 17) & 0x71d0000000000000;
        x ^= (x >> 29) & 0x0000000555555540;
        x ^= (x >> 29) & 0x0000000000000015;
        x
    }
}

impl Clone for MT19937_64 {
    #[inline(always)]
    fn clone(&self) -> MT19937_64 {
        *self
    }
}

impl Debug for MT19937_64 {
    fn fmt(&self, f: &mut fmt::Formatter) -> fmt::Result {
        f.debug_struct("MT19937_64")
            .field("idx", &self.idx)
            .field("state", &&self.state[..])
            .finish()
    }
}

impl Eq for MT19937_64 {}

impl Hash for MT19937_64 {
    fn hash<H: Hasher>(&self, hasher_state: &mut H) {
        self.idx.hash(hasher_state);
        for x in self.state.iter() {
            x.0.hash(hasher_state)
        }
    }
}

impl Ord for MT19937_64 {
    fn cmp(&self, other: &MT19937_64) -> Ordering {
        match Ord::cmp(&self.idx, &other.idx) {
            Ordering::Equal => Ord::cmp(&self.state[..], &other.state[..]),
            ordering => ordering,
        }
    }
}

impl PartialEq for MT19937_64 {
    fn eq(&self, other: &MT19937_64) -> bool {
        self.idx == other.idx
            && Iterator::zip(self.state.iter(), other.state.iter()).all(|(l, r)| l == r)
    }
}

impl PartialOrd for MT19937_64 {
    fn partial_cmp(&self, other: &MT19937_64) -> Option<Ordering> {
        Some(Ord::cmp(self, other))
    }
}

#[derive(Copy)]
pub struct MT19937 {
    idx: usize,
    state: [Wra<u32>; Self::N],
}

impl MT19937 {
    pub const UNINITIALIZED: MT19937 = MT19937 {
        idx: 0,
        state: [Wra(0); Self::N],
    };

    pub const N: usize = 624;
    pub const M: usize = 397;
    pub const ONE: Wra<u32> = Wra(1);
    pub const MATRIX_A: Wra<u32> = Wra(0x9908b0df);
    pub const UPPER_MASK: Wra<u32> = Wra(0x80000000);
    pub const LOWER_MASK: Wra<u32> = Wra(0x7fffffff);

    pub fn from_seed_u32(seed: u32) -> MT19937 {
        let mut mt = Self::UNINITIALIZED;
        mt.reseed_u32(seed);
        mt
    }

    pub fn reseed_u32(&mut self, seed: u32) {
        self.idx = Self::N;
        self.state[0] = Wra(seed);
        for i in 1..Self::N {
            self.state[i] =
                Wra(1812433253) * (self.state[i - 1] ^ (self.state[i - 1] >> 30)) + Wra(i as u32);
        }
    }

    pub fn from_seed(seed: &[u32]) -> MT19937 {
        let mut mt = Self::UNINITIALIZED;
        mt.reseed(seed);
        mt
    }

    pub fn reseed(&mut self, key: &[u32]) {
        self.reseed_u32(19650218u32);
        let mut i = 1;
        let mut j = 0;
        for _ in 0..max(Self::N, key.len()) {
            self.state[i] = (self.state[i]
                ^ ((self.state[i - 1] ^ (self.state[i - 1] >> 30)) * Wra(1664525)))
                + Wra(key[j])
                + Wra(j as u32);
            i += 1;
            if i >= Self::N {
                self.state[0] = self.state[Self::N - 1];
                i = 1;
            }
            j += 1;
            if j >= key.len() {
                j = 0;
            }
        }
        for _ in 0..Self::N - 1 {
            self.state[i] = (self.state[i]
                ^ ((self.state[i - 1] ^ (self.state[i - 1] >> 30)) * Wra(1566083941)))
                - Wra(i as u32);
            i += 1;
            if i >= Self::N {
                self.state[0] = self.state[Self::N - 1];
                i = 1;
            }
        }
        self.state[0] = Wra(1 << 31);
    }

    pub fn next_u32(&mut self) -> u32 {
        debug_assert!(self.idx != 0);
        if self.idx >= Self::N {
            self.fill_next_state();
        }
        let Wra(x) = self.state[self.idx];
        self.idx += 1;
        Self::temper(x)
    }

    pub fn fill_next_state(&mut self) {
        for i in 0..Self::N - Self::M {
            let x = (self.state[i] & Self::UPPER_MASK) | (self.state[i + 1] & Self::LOWER_MASK);
            self.state[i] = self.state[i + Self::M] ^ (x >> 1) ^ ((x & Self::ONE) * Self::MATRIX_A);
        }
        for i in Self::N - Self::M..Self::N - 1 {
            let x = (self.state[i] & Self::UPPER_MASK) | (self.state[i + 1] & Self::LOWER_MASK);
            self.state[i] =
                self.state[i + Self::M - Self::N] ^ (x >> 1) ^ ((x & Self::ONE) * Self::MATRIX_A);
        }
        let x = (self.state[Self::N - 1] & Self::UPPER_MASK) | (self.state[0] & Self::LOWER_MASK);
        self.state[Self::N - 1] =
            self.state[Self::M - 1] ^ (x >> 1) ^ ((x & Self::ONE) * Self::MATRIX_A);
        self.idx = 0;
    }

    pub fn recover(samples: &[u32]) -> MT19937 {
        assert_eq!(samples.len(), Self::N);
        let mut mt = Self::UNINITIALIZED;
        for (in_, out) in Iterator::zip(samples.iter(), mt.state.iter_mut()) {
            *out = Wra(Self::untemper(*in_));
        }
        mt.idx = Self::N;
        mt
    }

    #[inline]
    fn temper(mut x: u32) -> u32 {
        x ^= x >> 11;
        x ^= (x << 7) & 0x9d2c5680;
        x ^= (x << 15) & 0xefc60000;
        x ^= x >> 18;
        x
    }

    #[inline]
    fn untemper(mut x: u32) -> u32 {
        x ^= x >> 18;
        x ^= (x << 15) & 0x2fc60000;
        x ^= (x << 15) & 0xc0000000;
        x ^= (x << 7) & 0x00001680;
        x ^= (x << 7) & 0x000c4000;
        x ^= (x << 7) & 0x0d200000;
        x ^= (x << 7) & 0x90000000;
        x ^= x >> 11;
        x ^= x >> 22;

        x
    }
}

impl Clone for MT19937 {
    #[inline(always)]
    fn clone(&self) -> MT19937 {
        *self
    }
}

impl Debug for MT19937 {
    fn fmt(&self, f: &mut fmt::Formatter) -> fmt::Result {
        f.debug_struct("MT19937")
            .field("idx", &self.idx)
            .field("state", &&self.state[..])
            .finish()
    }
}

impl Eq for MT19937 {}

impl Hash for MT19937 {
    fn hash<H: Hasher>(&self, hasher_state: &mut H) {
        self.idx.hash(hasher_state);
        for x in self.state.iter() {
            x.0.hash(hasher_state)
        }
    }
}

impl Ord for MT19937 {
    fn cmp(&self, other: &MT19937) -> Ordering {
        match Ord::cmp(&self.idx, &other.idx) {
            Ordering::Equal => Ord::cmp(&self.state[..], &other.state[..]),
            ordering => ordering,
        }
    }
}

impl PartialEq for MT19937 {
    fn eq(&self, other: &MT19937) -> bool {
        self.idx == other.idx
            && Iterator::zip(self.state.iter(), other.state.iter()).all(|(l, r)| l == r)
    }
}

impl PartialOrd for MT19937 {
    fn partial_cmp(&self, other: &MT19937) -> Option<Ordering> {
        Some(Ord::cmp(self, other))
    }
}

#[derive(Copy, Clone)]
pub struct SplitMix64(u64);

impl SplitMix64 {
    pub const STATE_SIZE: u8 = 1;

    pub fn next_u32(&mut self) -> u32 {
        self.next_u64() as _
    }

    pub fn next_u64(&mut self) -> u64 {
        let mut z = Wra(self.0) + Wra(0x9E3779B97F4A7C15_u64);
        self.0 = z.0;
        z = (z ^ (z >> 30)) * Wra(0xBF58476D1CE4E5B9_u64);
        z = (z ^ (z >> 27)) * Wra(0x94D049BB133111EB_u64);
        (z ^ (z >> 31)).0
    }

    pub fn reseed(&mut self, seed: u64) {
        self.0 = seed;
    }

    pub fn from_seed(seed: u64) -> Self {
        Self(seed)
    }
}

#[derive(Copy, Clone)]
pub struct Xorshift128([u64; 2]);

impl Xorshift128 {
    pub const STATE_SIZE: u8 = 2;
    pub const EMPTY: Xorshift128 = Xorshift128([0, 0]);
    pub const JUMP: [u64; 2] = [0x8a5cd789635d2dff, 0x121fd2155c472f96];

    pub fn next_u32(&mut self) -> u32 {
        self.next_u64() as _
    }

    pub fn next_u64(&mut self) -> u64 {
        let mut s1 = Wra(self.0[0]);
        let s0 = Wra(self.0[1]);
        let result = s0 + s1;
        self.0[0] = s0.0;
        s1 ^= s1 << 23;
        self.0[1] = (s1 ^ s0 ^ (s1 >> 18) ^ (s0 >> 5)).0;
        result.0
    }

    pub fn jump(&mut self, count: usize) {
        for _ in 0..count {
            let mut s0: u64 = 0;
            let mut s1: u64 = 0;

            for i in &Self::JUMP {
                for b in 0..64 {
                    if (i & 1 << b) != 0 {
                        s0 ^= self.0[0];
                        s1 ^= self.0[1];
                    }
                    self.next_u64();
                }
            }
            self.0[0] = s0;
            self.0[1] = s1;
        }
    }

    pub fn reseed(&mut self, seed: &[u64; 2]) {
        self.0[0] = seed[0];
        self.0[1] = seed[1];
    }

    pub fn from_seed(seed: [u64; 2]) -> Self {
        Self(seed)
    }
}

#[derive(Copy, Clone)]
pub struct Xoroshiro128([u64; 2]);

impl Xoroshiro128 {
    pub const STATE_SIZE: u8 = 2;
    pub const EMPTY: Xoroshiro128 = Xoroshiro128([0, 0]);
    pub const JUMP: [u64; 2] = [0xbeac0467eba5facb, 0xd86b048b86aa9922];

    pub fn next_u32(&mut self) -> u32 {
        self.next_u64() as _
    }

    pub fn next_u64(&mut self) -> u64 {
        let s0 = Wra(self.0[0]);
        let mut s1 = Wra(self.0[1]);
        let result = s0 + s1;

        s1 ^= s0;
        self.0[0] = (Wra(u64::rotate_left(s0.0, 55)) ^ s1 ^ (s1 << 14)).0;
        self.0[1] = u64::rotate_left(s1.0, 36);

        result.0
    }

    pub fn jump(&mut self, count: usize) {
        for _ in 0..count {
            let mut s0: u64 = 0;
            let mut s1: u64 = 0;

            for i in &Self::JUMP {
                for b in 0..64 {
                    if (i & 1 << b) != 0 {
                        s0 ^= self.0[0];
                        s1 ^= self.0[1];
                    }
                    self.next_u64();
                }
            }
            self.0[0] = s0;
            self.0[1] = s1;
        }
    }

    pub fn reseed(&mut self, seed: &[u64; 2]) {
        self.0[0] = seed[0];
        self.0[1] = seed[1];
    }

    pub fn from_seed(seed: [u64; 2]) -> Self {
        Self(seed)
    }
}

#[derive(Clone, Copy)]
pub struct Xorshift1024 {
    state: [u64; 16],
    p: usize,
}

impl Xorshift1024 {
    pub const STATE_SIZE: u8 = 16;

    pub const EMPTY: Self = Self {
        state: [0; 16],
        p: 0,
    };

    pub const JUMP: [u64; 16] = [
        0x84242f96eca9c41d,
        0xa3c65b8776f96855,
        0x5b34a39f070b5837,
        0x4489affce4f31a1e,
        0x2ffeeb0a48316f40,
        0xdc2d9891fe68c022,
        0x3659132bb12fea70,
        0xaac17d8efa43cab8,
        0xc4cb815590989b13,
        0x5ee975283d71c93b,
        0x691548c86c1bd540,
        0x7910c41d10a1e6a5,
        0x0b5fc64563b3e2a8,
        0x047f7684e9fc949d,
        0xb99181f2d8f685ca,
        0x284600e3f30e38c3,
    ];

    pub fn next_u32(&mut self) -> u32 {
        self.next_u64() as u32
    }

    pub fn next_u64(&mut self) -> u64 {
        let s0 = self.state[self.p];
        self.p = (self.p + 1) & 15;
        let mut s1 = self.state[self.p];

        s1 ^= s1 << 31;
        self.state[self.p] = s1 ^ s0 ^ (s1 >> 11) ^ (s0 >> 30);

        (Wra(self.state[self.p]) * Wra(1181783497276652981_u64)).0
    }

    pub fn jump(&mut self, count: usize) {
        for _ in 0..count {
            let mut t: [u64; 16] = [0; 16];
            for i in &Self::JUMP {
                for b in 0..64 {
                    if (i & 1 << b) != 0 {
                        for (j, t_elem) in t.iter_mut().enumerate().take(16) {
                            *t_elem ^= self.state[(j + self.p) & 15];
                        }
                    }
                    self.next_u64();
                }
            }

            for (j, v) in t.iter().enumerate() {
                self.state[(j + self.p) & 15] = *v;
            }
        }
    }

    pub fn reseed(&mut self, seed: &[u64; 16]) {
        for (i, element) in seed.iter().enumerate() {
            self.state[i] = *element;
        }
    }

    pub fn from_seed(seed: [u64; 16]) -> Self {
        Self { state: seed, p: 0 }
    }
}

/// Macro to generate integer bitflags.
/// Added here because the auto completion didn't recognized the flags when used as extern crate.
/// Removed the verbose functions.
/// From bitflags crate (https://github.com/bitflags/bitflags).
/// See Credits.txt for the license.
#[macro_export(local_inner_macros)]
macro_rules! bitflags {
    (
        $(#[$outer:meta])*
        pub struct $BitFlags:ident: $T:ty {
            $(
                $(#[$inner:ident $($args:tt)*])*
                const $Flag:ident = $value:expr;
            )+
        }
    ) => {
        __bitflags! {
            $(#[$outer])*
            (pub) $BitFlags: $T {
                $(
                    $(#[$inner $($args)*])*
                    $Flag = $value;
                )+
            }
        }
    };
    (
        $(#[$outer:meta])*
        struct $BitFlags:ident: $T:ty {
            $(
                $(#[$inner:ident $($args:tt)*])*
                const $Flag:ident = $value:expr;
            )+
        }
    ) => {
        __bitflags! {
            $(#[$outer])*
            () $BitFlags: $T {
                $(
                    $(#[$inner $($args)*])*
                    $Flag = $value;
                )+
            }
        }
    };
    (
        $(#[$outer:meta])*
        pub ($($vis:tt)+) struct $BitFlags:ident: $T:ty {
            $(
                $(#[$inner:ident $($args:tt)*])*
                const $Flag:ident = $value:expr;
            )+
        }
    ) => {
        __bitflags! {
            $(#[$outer])*
            (pub ($($vis)+)) $BitFlags: $T {
                $(
                    $(#[$inner $($args)*])*
                    $Flag = $value;
                )+
            }
        }
    };
}

#[macro_export(local_inner_macros)]
#[doc(hidden)]
macro_rules! __bitflags {
    (
        $(#[$outer:meta])*
        ($($vis:tt)*) $BitFlags:ident: $T:ty {
            $(
                $(#[$inner:ident $($args:tt)*])*
                $Flag:ident = $value:expr;
            )+
        }
    ) => {
        $(#[$outer])*
        #[derive(Copy, PartialEq, Eq, Clone, PartialOrd, Ord, Hash)]
        $($vis)* struct $BitFlags {
            bits: $T,
        }

        __impl_bitflags! {
            $BitFlags: $T {
                $(
                    $(#[$inner $($args)*])*
                    $Flag = $value;
                )+
            }
        }
    };
}

#[macro_export(local_inner_macros)]
#[doc(hidden)]
#[cfg(bitflags_const_fn)]
macro_rules! __fn_bitflags {
    (
        $(# $attr_args:tt)*
        const fn $($item:tt)*
    ) => {
        $(# $attr_args)*
        const fn $($item)*
    };
    (
        $(# $attr_args:tt)*
        pub const fn $($item:tt)*
    ) => {
        $(# $attr_args)*
        pub const fn $($item)*
    };
    (
        $(# $attr_args:tt)*
        pub const unsafe fn $($item:tt)*
    ) => {
        $(# $attr_args)*
        pub const unsafe fn $($item)*
    };
}

#[macro_export(local_inner_macros)]
#[doc(hidden)]
#[cfg(not(bitflags_const_fn))]
macro_rules! __fn_bitflags {
    (
        $(# $attr_args:tt)*
        const fn $($item:tt)*
    ) => {
        $(# $attr_args)*
        fn $($item)*
    };
    (
        $(# $attr_args:tt)*
        pub const fn $($item:tt)*
    ) => {
        $(# $attr_args)*
        pub fn $($item)*
    };
    (
        $(# $attr_args:tt)*
        pub const unsafe fn $($item:tt)*
    ) => {
        $(# $attr_args)*
        pub unsafe fn $($item)*
    };
}

#[macro_export(local_inner_macros)]
#[doc(hidden)]
macro_rules! __impl_bitflags {
    (
        $BitFlags:ident: $T:ty {
            $(
                $(#[$attr:ident $($args:tt)*])*
                $Flag:ident = $value:expr;
            )+
        }
    ) => {
        impl $crate::_core::fmt::Debug for $BitFlags {
            fn fmt(&self, f: &mut $crate::_core::fmt::Formatter) -> $crate::_core::fmt::Result {
                #[allow(non_snake_case)]
                trait __BitFlags {
                    $(
                        #[inline]
                        fn $Flag(&self) -> bool { false }
                    )+
                }

                impl __BitFlags for $BitFlags {
                    $(
                        __impl_bitflags! {
                            #[allow(deprecated)]
                            #[inline]
                            $(? #[$attr $($args)*])*
                            fn $Flag(&self) -> bool {
                                if Self::$Flag.bits == 0 && self.bits != 0 {
                                    false
                                } else {
                                    self.bits & Self::$Flag.bits == Self::$Flag.bits
                                }
                            }
                        }
                    )+
                }

                let mut first = true;
                $(
                    if <$BitFlags as __BitFlags>::$Flag(self) {
                        if !first {
                            f.write_str(" | ")?;
                        }
                        first = false;
                        f.write_str(__bitflags_stringify!($Flag))?;
                    }
                )+
                let extra_bits = self.bits & !$BitFlags::all().bits();
                if extra_bits != 0 {
                    if !first {
                        f.write_str(" | ")?;
                    }
                    first = false;
                    f.write_str("0x")?;
                    $crate::_core::fmt::LowerHex::fmt(&extra_bits, f)?;
                }
                if first {
                    f.write_str("(empty)")?;
                }
                Ok(())
            }
        }
        impl $crate::_core::fmt::Binary for $BitFlags {
            fn fmt(&self, f: &mut $crate::_core::fmt::Formatter) -> $crate::_core::fmt::Result {
                $crate::_core::fmt::Binary::fmt(&self.bits, f)
            }
        }
        impl $crate::_core::fmt::Octal for $BitFlags {
            fn fmt(&self, f: &mut $crate::_core::fmt::Formatter) -> $crate::_core::fmt::Result {
                $crate::_core::fmt::Octal::fmt(&self.bits, f)
            }
        }
        impl $crate::_core::fmt::LowerHex for $BitFlags {
            fn fmt(&self, f: &mut $crate::_core::fmt::Formatter) -> $crate::_core::fmt::Result {
                $crate::_core::fmt::LowerHex::fmt(&self.bits, f)
            }
        }
        impl $crate::_core::fmt::UpperHex for $BitFlags {
            fn fmt(&self, f: &mut $crate::_core::fmt::Formatter) -> $crate::_core::fmt::Result {
                $crate::_core::fmt::UpperHex::fmt(&self.bits, f)
            }
        }

        impl $crate::_core::ops::BitOr for $BitFlags {
            type Output = $BitFlags;
            #[inline]
            fn bitor(self, other: $BitFlags) -> $BitFlags {
                $BitFlags { bits: self.bits | other.bits }
            }
        }

        impl $crate::_core::ops::BitOrAssign for $BitFlags {
            #[inline]
            fn bitor_assign(&mut self, other: $BitFlags) {
                self.bits |= other.bits;
            }
        }

        impl $crate::_core::ops::BitXor for $BitFlags {
            type Output = $BitFlags;
            #[inline]
            fn bitxor(self, other: $BitFlags) -> $BitFlags {
                $BitFlags { bits: self.bits ^ other.bits }
            }
        }

        impl $crate::_core::ops::BitXorAssign for $BitFlags {
            #[inline]
            fn bitxor_assign(&mut self, other: $BitFlags) {
                self.bits ^= other.bits;
            }
        }

        impl $crate::_core::ops::BitAnd for $BitFlags {
            type Output = $BitFlags;
            #[inline]
            fn bitand(self, other: $BitFlags) -> $BitFlags {
                $BitFlags { bits: self.bits & other.bits }
            }
        }

        impl $crate::_core::ops::BitAndAssign for $BitFlags {
            #[inline]
            fn bitand_assign(&mut self, other: $BitFlags) {
                self.bits &= other.bits;
            }
        }

        impl $crate::_core::ops::Sub for $BitFlags {
            type Output = $BitFlags;

            #[inline]
            fn sub(self, other: $BitFlags) -> $BitFlags {
                $BitFlags { bits: self.bits & !other.bits }
            }
        }

        impl $crate::_core::ops::SubAssign for $BitFlags {

            #[inline]
            fn sub_assign(&mut self, other: $BitFlags) {
                self.bits &= !other.bits;
            }
        }

        impl $crate::_core::ops::Not for $BitFlags {
            type Output = $BitFlags;


            #[inline]
            fn not(self) -> $BitFlags {
                $BitFlags { bits: !self.bits } & $BitFlags::all()
            }
        }

        impl $crate::_core::iter::Extend<$BitFlags> for $BitFlags {
            fn extend<T: $crate::_core::iter::IntoIterator<Item=$BitFlags>>(&mut self, iterator: T) {
                for item in iterator {
                    self.insert(item)
                }
            }
        }

        impl $crate::_core::iter::FromIterator<$BitFlags> for $BitFlags {
            fn from_iter<T: $crate::_core::iter::IntoIterator<Item=$BitFlags>>(iterator: T) -> $BitFlags {
                let mut result = Self::empty();
                result.extend(iterator);
                result
            }
        }
    };

    (
        $(#[$filtered:meta])*
        ? #[cfg $($cfgargs:tt)*]
        $(? #[$rest:ident $($restargs:tt)*])*
        fn $($item:tt)*
    ) => {
        __impl_bitflags! {
            $(#[$filtered])*
            #[cfg $($cfgargs)*]
            $(? #[$rest $($restargs)*])*
            fn $($item)*
        }
    };
    (
        $(#[$filtered:meta])*
        ? #[$next:ident $($nextargs:tt)*]
        $(? #[$rest:ident $($restargs:tt)*])*
        fn $($item:tt)*
    ) => {
        __impl_bitflags! {
            $(#[$filtered])*

            $(? #[$rest $($restargs)*])*
            fn $($item)*
        }
    };
    (
        $(#[$filtered:meta])*
        fn $($item:tt)*
    ) => {
        $(#[$filtered])*
        fn $($item)*
    };

    (
        $(#[$filtered:meta])*
        ? #[cfg $($cfgargs:tt)*]
        $(? #[$rest:ident $($restargs:tt)*])*
        const $($item:tt)*
    ) => {
        __impl_bitflags! {
            $(#[$filtered])*
            #[cfg $($cfgargs)*]
            $(? #[$rest $($restargs)*])*
            const $($item)*
        }
    };
    (
        $(#[$filtered:meta])*
        ? #[$next:ident $($nextargs:tt)*]
        $(? #[$rest:ident $($restargs:tt)*])*
        const $($item:tt)*
    ) => {
        __impl_bitflags! {
            $(#[$filtered])*
            $(? #[$rest $($restargs)*])*
            const $($item)*
        }
    };
    (
        $(#[$filtered:meta])*
        const $($item:tt)*
    ) => {
        $(#[$filtered])*
        const $($item)*
    };
}

#[macro_export]
#[doc(hidden)]
macro_rules! __bitflags_stringify {
    ($s:ident) => {
        stringify!($s)
    };
}

/// Contains configuration parameters for the VM.
/// Will be serialized/deserialized from a config file.
#[cfg_attr(feature = "config_file", derive(Serialize, Deserialize))]
pub struct RuntimeConfig {
    /// The cache directory.
    pub cache_dir: PathBuf,

    /// Additional package directories.
    pub additional_package_dirs: Vec<PathBuf>,

    /// Per-thread stack size in bytes.
    pub thread_stack_size: usize,
}

impl Default for RuntimeConfig {
    fn default() -> Self {
        Self {
            cache_dir: PathBuf::from("_roncache_"),
            additional_package_dirs: Vec::new(),
            thread_stack_size: 1024 * 1024 * 8,
        }
    }
}

#[cfg(feature = "config_file")]
impl RuntimeConfig {
    pub const CONFIG_FILE: &'static str = "vm.ini";

    pub fn load_from_file() -> Result<Self, ()> {
        if !Path::new(Self::CONFIG_FILE).exists() {
            let default = Self::default();
            let _ = Self::save_to_file(&default);
            Ok(default)
        } else if let Ok(string) = fs::read_to_string(Path::new(Self::CONFIG_FILE)) {
            if let Ok(object) = json::from_str(&string) {
                Ok(object)
            } else {
                Err(())
            }
        } else {
            Err(())
        }
    }

    pub fn save_to_file(inp: &Self) -> Result<(), ()> {
        if let Ok(string) = json::to_string_pretty(inp) {
            if fs::write(Path::new(Self::CONFIG_FILE), string).is_ok() {
                Ok(())
            } else {
                Err(())
            }
        } else {
            Err(())
        }
    }
}

#[cfg(test)]
mod tests {
    use super::*;

    #[test]
    fn mersenne_twister_test_64bit_seeded() {
        let mt = MT19937_64::from_seed_u64(0x123456789abcdefu64);
        for (&Wra(x), &y) in mt
            .state
            .iter()
            .zip(MERSENNE_TWISTER64_STATE_SEEDED_BY_U64.iter())
        {
            assert!(x == y);
        }
    }

    #[test]
    fn mersenne_twister_test_64bit_slice_seeded() {
        let mt = MT19937_64::from_seed(&[0x12345u64, 0x23456u64, 0x34567u64, 0x45678u64][..]);
        for (&Wra(x), &y) in mt
            .state
            .iter()
            .zip(MERSENNE_TWISTER64_STATE_SEEDED_BY_SLICE.iter())
        {
            assert!(x == y);
        }
    }

    #[test]
    fn mersenne_twister_test_64bit_output() {
        let mut mt = MT19937_64::from_seed(&[0x12345u64, 0x23456u64, 0x34567u64, 0x45678u64][..]);
        for x in MERSENNE_TWISTER64_TEST_OUTPUT.iter() {
            assert!(mt.next_u64() == *x);
        }
    }

    #[rustfmt::skip]
    #[cfg(test)]
    const MERSENNE_TWISTER64_STATE_SEEDED_BY_U64: [u64; MT19937_64::NN] = [
        81985529216486895,
        1791783545744114692,
        604013923869356214,
        296213109303876097,
        6923710694692163889,
        13205119584621876597,
        11033091707158564593,
        6240080577330458046,
        6391091230317693851,
        3142493543514746907,
        12293512030652881353,
        2062181304702107066,
        4654451180172173246,
        11441927625268696480,
        14365762244911147912,
        18029629756502187134,
        7331740749253838089,
        6610823624717752953,
        18246827935145324330,
        10680693382789357896,
        14638587269153607702,
        8633864969252503238,
        9566721819554316817,
        6143884850529323630,
        10906314227572090523,
        10907689704186884094,
        14802274577639469926,
        3401801631809463260,
        12344530338405822920,
        4956444630876681887,
        14793227046740343780,
        2037099132120965306,
        6441991539629590226,
        12964898550824984632,
        12259055633860243540,
        14928425551652759873,
        6183427467171036862,
        5400792687527135416,
        6408845498294423467,
        14659391812871673609,
        4904880327708328682,
        16004025791281387640,
        15740202225231696585,
        10802686250382853037,
        7329769865301751535,
        13158972625497029123,
        1462611033182269787,
        14970257040982151726,
        1785898624104826137,
        4018756387164900502,
        4658545214302937232,
        12929223690873008,
        2189306884804589348,
        7407145675715022217,
        17926372328502417694,
        10393381392936406352,
        1519619275753850274,
        3949038713401990067,
        11368953568800795569,
        14644212788164115378,
        3789816819491622233,
        11192801356205178850,
        4208023585462672030,
        1023784985917378565,
        10420842316752161825,
        2134329768317386600,
        10009382106317716874,
        1061284023672113451,
        12181229230564241875,
        2507813008873369858,
        491377794161482656,
        1753720522338319207,
        13405595244999805539,
        64138164073787990,
        12320498326396355432,
        11779553027707203565,
        1112643061962194511,
        10649695524108772656,
        3606504838176593944,
        9766617496074413191,
        14913709254545614513,
        17786322741581487003,
        5869942273187627530,
        3835450227478597954,
        13916038151171491566,
        9003731200188680958,
        13696512428165460009,
        12769326485216300262,
        12033565608077516908,
        15827437595453457839,
        9081822962023519126,
        13729953554469296870,
        14683166359047427696,
        15953207475273187220,
        11421240586025801449,
        6102838545700560046,
        8293613563303025699,
        18329916755578359899,
        3729358436700194778,
        13602102386364221365,
        18211263000630633615,
        2749239093744591105,
        12313868987179764883,
        17343761002274333924,
        2968322519436596739,
        5919354133661866992,
        5667644606957959367,
        16954289952443151673,
        6384564465401602462,
        6843583206213995104,
        3776716724405842555,
        2493814834786559246,
        11695884210276578790,
        5277431840939578757,
        10770107586796995750,
        17730900742717009223,
        8605167815254274408,
        1834669206241314538,
        13386897725877112216,
        8421817962304670345,
        3844006852001387104,
        17749959801471998809,
        2889900833057928524,
        12405269285066822359,
        3981740344450333421,
        3599739118559850278,
        8389005402870866988,
        8056933947569598312,
        10816660871222865141,
        11505725300589228268,
        3985627793803701336,
        15054413190071596027,
        11203097170853309212,
        15982971736834602699,
        6491081411731397038,
        5032971170848265546,
        6707451110701085623,
        16660695088837779847,
        1292203148674769086,
        6831779758890451953,
        1273082991379300796,
        4816977719034172057,
        1227740039402122566,
        11774987201411346397,
        11000284286582049731,
        17607239656417890430,
        3905066968366541195,
        4536740449007338242,
        2456916080186164718,
        13537108370327412075,
        13061598491450163979,
        11333202480645029932,
        417941510859004590,
        9359271011890692911,
        15516319166549451395,
        13173397503737614619,
        9674015854587717889,
        14319184628944941860,
        11461157460156307321,
        8470403413024138814,
        15360905514977934003,
        12434310806890127761,
        5668365606955471993,
        18003197684936171963,
        1713810861376697852,
        15749877514364305905,
        4878375384529970736,
        10666006561241761348,
        14715617963938206966,
        1521473769572924090,
        2657449321132939612,
        2734687391377742295,
        9191020263043986551,
        3643264948674757483,
        3578760580494634877,
        14476122573168434344,
        5845171853656694719,
        2788922203841648407,
        8033902436969920701,
        15882240616055029183,
        10128649212328844992,
        1006259818353534671,
        10264281777791075353,
        14847900867811057270,
        4583748711890019913,
        12309703074219471502,
        6941586872827696982,
        3745802569518482438,
        2894905614301835210,
        7335498349179313471,
        17387470308519765668,
        5433932443266606362,
        14371289029466467199,
        10374778237833390477,
        4776388970536189925,
        1816258018112460759,
        7276434563887405711,
        16169106984301305275,
        2254368830142317086,
        862540640621281805,
        10871008795911557137,
        5418842661241340192,
        8974351759208567447,
        11487152290323754793,
        6225694545187332187,
        8855197444497053343,
        18275914506735836308,
        15923775749857325146,
        9368682834059667317,
        11886054335274482108,
        7248432174334290232,
        12948783033451316952,
        16413608400513391398,
        5395767780443283798,
        18177623543956751905,
        79375280521917137,
        88402592242998933,
        12424141698864532490,
        3506566252331882050,
        15975266567245850741,
        1432897815408109466,
        16349251380638817519,
        6935098887364586074,
        18134822759325374430,
        13289363508364170681,
        17834238808526510016,
        17849560451691129641,
        9625769816461176133,
        11863959125305356127,
        10159009876047017790,
        2270215115277990514,
        10335825866811872497,
        10689024433546771615,
        15402424147055348610,
        15938065922691302807,
        2186961644917581807,
        17743571035416418031,
        18189648471277689961,
        6166355766821279120,
        10383219040510737004,
        11833675146901362758,
        5015772504555552997,
        9466405520041559302,
        3890913253695856295,
        4199704116067417423,
        9536371304943548632,
        2803365044720657736,
        8294255653172709023,
        4949919456077810878,
        13179261481143762828,
        17169909754051256048,
        4131432844970114738,
        4710999410297164870,
        79362067765594744,
        16470327280077266966,
        9045473539587198896,
        12919627169836945949,
        13687654190330302836,
        10291072957815184576,
        12669641865365818653,
        7897093283919933559,
        8774498508392009667,
        17733475113271198752,
        7563755234646661166,
        14400591327379984971,
        3324264236052574129,
        17443813642144444967,
        14253897042581220703,
        2880238993097547320,
        15284741228796762341,
        7340174240767294332,
        12625292554856200456,
        5758675782428868050,
        9228068019606031400,
        10429450678612884084,
        10614459586086506961,
        8139473603542569003,
        10814373026410622583,
        4011828072370763431,
        5540639547564078450,
        8161872968472326991,
        14300024824953534415,
        2135593418061136886,
        628742652522331481,
        6231251893857464513,
        4921212502846493405,
        3364411375653074378,
        11642530140974623649,
        3585719091449989575,
        13407410611541963292,
        818686227520123496,
        14065717611881608555,
        12577192992972897388,
        11463784563875803771,
        13136698746312533867,
        12860699992103060892,
        14670774660241317870,
        17890504795855548626,
        9605805324699469031,
        6412165298585204844,
        678652354371239765,
        1676294081870876190,
        8995213228755328628,
        16153912129483269824,
        4748371455456104055,
        15348364511313581551,
        10147917971634761646,
        8545060171396429423,
        1413465926917694602,
        14925734419407102839,
        12220731818240280730,
        16069120541665094639
    ];

    #[rustfmt::skip]
    #[cfg(test)]
    const MERSENNE_TWISTER64_STATE_SEEDED_BY_SLICE: [u64; MT19937_64::NN] = [
        9223372036854775808,
        11906848963885322876,
        2366922794640711022,
        1039674428528475923,
        3532693117775135603,
        4008869120475271563,
        17747978335774359060,
        14972770412725955390,
        3858352546733417902,
        5345612019402505742,
        7758276406156335750,
        6001919363687313191,
        2547684760428594376,
        10392438263683240802,
        8968713240322292543,
        14406031157106643586,
        3964892302884586199,
        4062779262181776338,
        16580562407461089692,
        12589582373071700978,
        15750410628907513263,
        11310313695732438417,
        15633947903704351334,
        18222915079249959102,
        14276842509123192698,
        6930516820607322720,
        15365297350207276392,
        8213498164667572384,
        2152779499883018824,
        13966133250965870373,
        10240771306433844368,
        14307168365450430565,
        11040552514370714895,
        2533639886572881353,
        9185674266382191104,
        14346522715072559330,
        14953130301049970203,
        15180875257012729653,
        1964218244082486892,
        6405341251447791135,
        11761351367919151087,
        3167849151490256233,
        1558463723413910204,
        4047863190093408546,
        18058286074055427032,
        7317716653786836408,
        17652746742586216402,
        6760726663271410936,
        17327162216619411332,
        14378483978609909724,
        2131305364409541273,
        16726816105924499124,
        9210182618446396614,
        6445236935855240210,
        2449852682157161554,
        6263322181339295035,
        6914873478768120792,
        5860130632837132104,
        186277607674026464,
        8693717914902489281,
        7758418146359524665,
        15036826958618606534,
        9020793635699266615,
        16681251223473385742,
        28790294402912016,
        16206435735609334231,
        4276151532523641810,
        17083626852979795873,
        15898385609762430430,
        7413408202278515221,
        6817627683834618267,
        14308485276827746090,
        18090035704918431532,
        17439280401835765253,
        9920708817472459377,
        17596494468204334260,
        8987881797008539223,
        5918674948541707799,
        1543803321776487042,
        4821966630366015761,
        6984206624831694542,
        18035097434221633402,
        16518401100072381614,
        5428007001392054535,
        9346296170248113790,
        8189955722678051590,
        8166058216851039534,
        5495705342415866955,
        17808354540446325627,
        239520990467221973,
        6774849326041393260,
        10588207904624720754,
        10508799966524468092,
        7314664134865101995,
        13330428261370692994,
        7315653225976003522,
        14752942780607268272,
        7386201019337306472,
        11074689804650560421,
        13251660986032530719,
        5804947702644260322,
        4725780123182197186,
        14723414396390934648,
        17218644267506543502,
        3765965502701684261,
        3604066792039542938,
        17362622132271438638,
        16875585620489891286,
        4514873179377317837,
        9308332464342002048,
        188567056399553729,
        2705891390840254977,
        13168211036505445211,
        6269486280874873673,
        7485168387351336182,
        18163642631999775128,
        1152810103088079572,
        10314639940536358822,
        3898255220108939804,
        12461785437811001117,
        14080290123823101293,
        8186155435419807960,
        15303633033386294539,
        16368372373799902572,
        16908740919128790793,
        7790227374552432870,
        3370942488781431421,
        5321468336044485163,
        9099464595185099272,
        12686959047356864605,
        15044140022848320070,
        17853451835866976714,
        15090981758503849092,
        7259421845759239401,
        17006897347539967307,
        11864671541689053919,
        3589888654233765802,
        17133675018297505478,
        10350789726188603215,
        5805562075215454138,
        6078313175004902257,
        15159259062264755988,
        4606458898055115768,
        8595623819596928458,
        10874665851480906795,
        9541918022094056642,
        7910492575696069731,
        14253990448274524591,
        11587237029817781157,
        8898150318182787055,
        9129838589367321414,
        13328388735954292593,
        17796364720220167616,
        8597915663953875317,
        2018393986500621684,
        13175088550176860755,
        1094714902621613987,
        8807072083132332364,
        14066712852747710486,
        8999937541229388765,
        9112579609010886366,
        3356356224211045166,
        4853220202257544572,
        10444170003278214107,
        1052947048789639998,
        1827363901483126686,
        15601796185052218891,
        11983393206205800981,
        13121259426767810380,
        9553182408890238788,
        3524616048466714316,
        6892649984567035338,
        12306438715782265106,
        6929080643604729797,
        10488981816167940982,
        3526412707713863908,
        13925166661639043721,
        3120081366166455125,
        12074161212633821290,
        8925556738888186426,
        8406789658316452783,
        9694538352161485523,
        10289430848224100722,
        18339763433413173518,
        920701930237947644,
        2818534229746382484,
        15586266845147401960,
        15899701243238871280,
        16635647107881635975,
        9436756036899151216,
        15869514808861706046,
        5377602059434346830,
        881770225321498601,
        4972312278793239748,
        13470351019631907494,
        15034318809458171738,
        5731070042043014264,
        8320132766717278470,
        10458189336915616638,
        1667073997662158604,
        16517673739089400781,
        9780691302643590844,
        1888289618321818453,
        9933541508716288366,
        7342610457445606218,
        7803853065241579933,
        16080562130327610447,
        1972475373062043809,
        2445190066574935778,
        16665102149891804629,
        3729422737555637347,
        15627314164145375682,
        5165153149317749684,
        1851884315110708417,
        17883927180228563680,
        18254359763092694099,
        8051365941650618695,
        9309548635890345699,
        263899551166810219,
        8033066166620504604,
        1803538698706947772,
        15690816866062867851,
        2223071627096777838,
        16579019743023052535,
        13162141123527406604,
        303902486500873444,
        16218914908155140970,
        7664023458078374736,
        4211782740976596951,
        9852041272241461170,
        6869872483205843001,
        17682149354114760050,
        2193325669751198964,
        18183657083348212654,
        17956232649388583703,
        17885330999340609820,
        15086254682221937578,
        2661870345357193374,
        824878816789277867,
        12195389379115398039,
        8118221630987421587,
        18090490544414672070,
        3156155883929578921,
        12762751134459068851,
        5164889741276341708,
        7716579664961922616,
        6242366333202544756,
        12664253830362087207,
        9768406626100492062,
        18276764521683238961,
        1981044956697052467,
        10832499469197748318,
        5822985766637060664,
        6589889711659930475,
        9415661998487594717,
        10372021223737917970,
        9008931203668510507,
        12048148024357412075,
        3686532183913588371,
        5820540035396407131,
        2469949645283598917,
        7565651341821095299,
        5197273755353226573,
        5880387491135838713,
        6730520764971726984,
        1627471928992184271,
        3164256474773483571,
        10891562408149301222,
        16127745993321845961,
        6089459304242537067,
        14350402415135140161,
        18114662877700924330,
        9359478022685723144,
        13171912360297387648,
        11237048723429932701,
        7800636006979166579,
        9289540047600185720,
        998919556795606739,
        2392987300775238592,
        12059856439917591208,
        10857265173257971923,
        15122926213571157845,
        12840523308034798986,
        1895411170536695373,
        4057105479876795998,
        6310373902706727113,
        8171018879503955734,
        1863802676851052784,
        14129048472806811984,
        5840360500395533120,
        6408991116533430303,
        17554903680613470616,
        7251872690709372415,
        3092878727914765317,
        11961922532714192260,
        6989054962715140021,
        7236766257488832035,
        5794159225877267393,
        15592220508405117453,
        13266267152869308514,
        12964887929723524270,
        15463019828589740680,
        5488263871426190118,
        18181645947417462531,
        3280221468542061885,
        4905596419059094060,
        3548266682460467135,
        1326982712296517686,
        12179707347278731003,
        14375460083628818157,
        12930964925920180049,
        9341456266356607437
    ];

    #[rustfmt::skip]
    #[cfg(test)]
    const MERSENNE_TWISTER64_TEST_OUTPUT: [u64; 1000] = [
        7266447313870364031,
        4946485549665804864,
        16945909448695747420,
        16394063075524226720,
        4873882236456199058,
        14877448043947020171,
        6740343660852211943,
        13857871200353263164,
        5249110015610582907,
        10205081126064480383,
        1235879089597390050,
        17320312680810499042,
        16489141110565194782,
        8942268601720066061,
        13520575722002588570,
        14226945236717732373,
        9383926873555417063,
        15690281668532552105,
        11510704754157191257,
        15864264574919463609,
        6489677788245343319,
        5112602299894754389,
        10828930062652518694,
        15942305434158995996,
        15445717675088218264,
        4764500002345775851,
        14673753115101942098,
        236502320419669032,
        13670483975188204088,
        14931360615268175698,
        8904234204977263924,
        12836915408046564963,
        12120302420213647524,
        15755110976537356441,
        5405758943702519480,
        10951858968426898805,
        17251681303478610375,
        4144140664012008120,
        18286145806977825275,
        13075804672185204371,
        10831805955733617705,
        6172975950399619139,
        12837097014497293886,
        12903857913610213846,
        560691676108914154,
        1074659097419704618,
        14266121283820281686,
        11696403736022963346,
        13383246710985227247,
        7132746073714321322,
        10608108217231874211,
        9027884570906061560,
        12893913769120703138,
        15675160838921962454,
        2511068401785704737,
        14483183001716371453,
        3774730664208216065,
        5083371700846102796,
        9583498264570933637,
        17119870085051257224,
        5217910858257235075,
        10612176809475689857,
        1924700483125896976,
        7171619684536160599,
        10949279256701751503,
        15596196964072664893,
        14097948002655599357,
        615821766635933047,
        5636498760852923045,
        17618792803942051220,
        580805356741162327,
        425267967796817241,
        8381470634608387938,
        13212228678420887626,
        16993060308636741960,
        957923366004347591,
        6210242862396777185,
        1012818702180800310,
        15299383925974515757,
        17501832009465945633,
        17453794942891241229,
        15807805462076484491,
        8407189590930420827,
        974125122787311712,
        1861591264068118966,
        997568339582634050,
        18046771844467391493,
        17981867688435687790,
        3809841506498447207,
        9460108917638135678,
        16172980638639374310,
        958022432077424298,
        4393365126459778813,
        13408683141069553686,
        13900005529547645957,
        15773550354402817866,
        16475327524349230602,
        6260298154874769264,
        12224576659776460914,
        6405294864092763507,
        7585484664713203306,
        5187641382818981381,
        12435998400285353380,
        13554353441017344755,
        646091557254529188,
        11393747116974949255,
        16797249248413342857,
        15713519023537495495,
        12823504709579858843,
        4738086532119935073,
        4429068783387643752,
        585582692562183870,
        1048280754023674130,
        6788940719869959076,
        11670856244972073775,
        2488756775360218862,
        2061695363573180185,
        6884655301895085032,
        3566345954323888697,
        12784319933059041817,
        4772468691551857254,
        6864898938209826895,
        7198730565322227090,
        2452224231472687253,
        13424792606032445807,
        10827695224855383989,
        11016608897122070904,
        14683280565151378358,
        7077866519618824360,
        17487079941198422333,
        3956319990205097495,
        5804870313319323478,
        8017203611194497730,
        3310931575584983808,
        5009341981771541845,
        6930001938490791874,
        14415278059151389495,
        11001114762641844083,
        6715939435439735925,
        411419160297131328,
        4522402260441335284,
        3381955501804126859,
        15935778656111987797,
        4345051260540166684,
        13978444093099579683,
        9219789505504949817,
        9245142924137529075,
        11628184459157386459,
        7242398879359936370,
        8511401943157540109,
        11948130810477009827,
        6865450671488705049,
        13965005347172621081,
        15956599226522058336,
        7737868921014130584,
        2107342503741411693,
        15818996300425101108,
        16399939197527488760,
        13971145494081508107,
        3910681448359868691,
        4249175367970221090,
        9735751321242454020,
        12418107929362160460,
        241792245481991138,
        5806488997649497146,
        10724207982663648949,
        1121862814449214435,
        1326996977123564236,
        4902706567834759475,
        12782714623891689967,
        7306216312942796257,
        15681656478863766664,
        957364844878149318,
        5651946387216554503,
        8197027112357634782,
        6302075516351125977,
        13454588464089597862,
        15638309200463515550,
        10116604639722073476,
        12052913535387714920,
        2889379661594013754,
        15383926144832314187,
        7841953313015471731,
        17310575136995821873,
        9820021961316981626,
        15319619724109527290,
        15349724127275899898,
        10511508162402504492,
        6289553862380300393,
        15046218882019267110,
        11772020174577005930,
        3537640779967351792,
        6801855569284252424,
        17687268231192623388,
        12968358613633237218,
        1429775571144180123,
        10427377732172208413,
        12155566091986788996,
        16465954421598296115,
        12710429690464359999,
        9547226351541565595,
        12156624891403410342,
        2985938688676214686,
        18066917785985010959,
        5975570403614438776,
        11541343163022500560,
        11115388652389704592,
        9499328389494710074,
        9247163036769651820,
        3688303938005101774,
        2210483654336887556,
        15458161910089693228,
        6558785204455557683,
        1288373156735958118,
        18433986059948829624,
        3435082195390932486,
        16822351800343061990,
        3120532877336962310,
        16681785111062885568,
        7835551710041302304,
        2612798015018627203,
        15083279177152657491,
        6591467229462292195,
        10592706450534565444,
        7438147750787157163,
        323186165595851698,
        7444710627467609883,
        8473714411329896576,
        2782675857700189492,
        3383567662400128329,
        3200233909833521327,
        12897601280285604448,
        3612068790453735040,
        8324209243736219497,
        15789570356497723463,
        1083312926512215996,
        4797349136059339390,
        5556729349871544986,
        18266943104929747076,
        1620389818516182276,
        172225355691600141,
        3034352936522087096,
        1266779576738385285,
        3906668377244742888,
        6961783143042492788,
        17159706887321247572,
        4676208075243319061,
        10315634697142985816,
        13435140047933251189,
        716076639492622016,
        13847954035438697558,
        7195811275139178570,
        10815312636510328870,
        6214164734784158515,
        16412194511839921544,
        3862249798930641332,
        1005482699535576005,
        4644542796609371301,
        17600091057367987283,
        4209958422564632034,
        5419285945389823940,
        11453701547564354601,
        9951588026679380114,
        7425168333159839689,
        8436306210125134906,
        11216615872596820107,
        3681345096403933680,
        5770016989916553752,
        11102855936150871733,
        11187980892339693935,
        396336430216428875,
        6384853777489155236,
        7551613839184151117,
        16527062023276943109,
        13429850429024956898,
        9901753960477271766,
        9731501992702612259,
        5217575797614661659,
        10311708346636548706,
        15111747519735330483,
        4353415295139137513,
        1845293119018433391,
        11952006873430493561,
        3531972641585683893,
        16852246477648409827,
        15956854822143321380,
        12314609993579474774,
        16763911684844598963,
        16392145690385382634,
        1545507136970403756,
        17771199061862790062,
        12121348462972638971,
        12613068545148305776,
        954203144844315208,
        1257976447679270605,
        3664184785462160180,
        2747964788443845091,
        15895917007470512307,
        15552935765724302120,
        16366915862261682626,
        8385468783684865323,
        10745343827145102946,
        2485742734157099909,
        916246281077683950,
        15214206653637466707,
        12895483149474345798,
        1079510114301747843,
        10718876134480663664,
        1259990987526807294,
        8326303777037206221,
        14104661172014248293,
        15531278677382192198,
        3874303698666230242,
        3611366553819264523,
        1358753803061653874,
        1552102816982246938,
        14492630642488100979,
        15001394966632908727,
        2273140352787320862,
        17843678642369606172,
        2903980458593894032,
        16971437123015263604,
        12969653681729206264,
        3593636458822318001,
        9719758956915223015,
        7437601263394568346,
        3327758049015164431,
        17851524109089292731,
        14769614194455139039,
        8017093497335662337,
        12026985381690317404,
        739616144640253634,
        15535375191850690266,
        2418267053891303448,
        15314073759564095878,
        10333316143274529509,
        16565481511572123421,
        16317667579273275294,
        13991958187675987741,
        3753596784796798785,
        9078249094693663275,
        8459506356724650587,
        12579909555010529099,
        7827737296967050903,
        5489801927693999341,
        10995988997350541459,
        14721747867313883304,
        7915884580303296560,
        4105766302083365910,
        12455549072515054554,
        13602111324515032467,
        5205971628932290989,
        5034622965420036444,
        9134927878875794005,
        11319873529597990213,
        14815445109496752058,
        2266601052460299470,
        5696993487088103383,
        6540200741841280242,
        6631495948031875490,
        5328340585170897740,
        17897267040961463930,
        9030000260502624168,
        14285709137129830926,
        12854071997824681544,
        15408328651008978682,
        1063314403033437073,
        13765209628446252802,
        242013711116865605,
        4772374239432528212,
        2515855479965038648,
        5872624715703151235,
        14237704570091006662,
        678604024776645862,
        12329607334079533339,
        17570877682732917020,
        2695443415284373666,
        4312672841405514468,
        6454343485137106900,
        8425658828390111343,
        16335501385875554899,
        5551095603809016713,
        11781094401885925035,
        9395557946368382509,
        9765123360948816956,
        18107191819981188154,
        16049267500594757404,
        16349966108299794199,
        1040405303135858246,
        2366386386131378192,
        223761048139910454,
        15375217587047847934,
        15231693398695187454,
        12916726640254571028,
        8878036960829635584,
        1626201782473074365,
        5758998126998248293,
        18077917959300292758,
        10585588923088536745,
        15072345664541731497,
        3559348759319842667,
        12744591691872202375,
        2388494115860283059,
        6414691845696331748,
        3069528498807764495,
        8737958486926519702,
        18059264986425101074,
        3139684427605102737,
        12378931902986734693,
        410666675039477949,
        12139894855769838924,
        5780722552400398675,
        7039346665375142557,
        3020733445712569008,
        2612305843503943561,
        13651771214166527665,
        16478681918975800939,
        566088527565499576,
        4715785502295754870,
        6957318344287196220,
        11645756868405128885,
        13139951104358618000,
        17650948583490040612,
        18168787973649736637,
        5486282999836125542,
        6122201977153895166,
        17324241605502052782,
        10063523107521105867,
        17537430712468011382,
        10828407533637104262,
        10294139354198325113,
        12557151830240236401,
        16673044307512640231,
        10918020421896090419,
        11077531235278014145,
        5499571814940871256,
        2334252435740638702,
        18177461912527387031,
        2000007376901262542,
        7968425560071444214,
        1472650787501520648,
        3115849849651526279,
        7980970700139577536,
        12153253535907642097,
        8109716914843248719,
        3154976533165008908,
        5553369513523832559,
        10345792701798576501,
        3677445364544507875,
        10637177623943913351,
        7380255087060498096,
        14479400372337014801,
        15381362583330700960,
        204531043189704802,
        13699106540959723942,
        3817903465872254783,
        10972364467110284934,
        2701394334530963810,
        2931625600749229147,
        16428252083632828910,
        11873166501966812913,
        5566810080537233762,
        7840617383807795056,
        10699413880206684652,
        18259119259617231436,
        10332714341486317526,
        10137911902863059694,
        669146221352346842,
        8373571610024623455,
        10620002450820868661,
        12220730820779815970,
        5902974968095412898,
        7931010481705150841,
        16413777368097063650,
        11273457888324769727,
        13719113891065284171,
        8327795098009702553,
        10333342364827584837,
        6202832891413866653,
        9137034567886143162,
        14514450826524340059,
        473610156015331016,
        813689571029117640,
        13776316799690285717,
        10429708855338427756,
        8995290140880620858,
        2320123852041754384,
        8082864073645003641,
        6961777411740398590,
        10008644283003991179,
        3239064015890722333,
        16762634970725218787,
        16467281536733948427,
        10563290046315192938,
        5108560603794851559,
        15121667220761532906,
        14155440077372845941,
        10050536352394623377,
        15474881667376037792,
        3448088038819200619,
        3692020001240358871,
        6444847992258394902,
        8687650838094264665,
        3028124591188972359,
        16945232313401161629,
        15547830510283682816,
        3982930188609442149,
        14270781928849894661,
        13768475593433447867,
        13815150225221307677,
        8502397232429564693,
        718377350715476994,
        7459266877697905475,
        8353375565171101521,
        7807281661994435472,
        16924127046922196149,
        10157812396471387805,
        2519858716882670232,
        7384148884750265792,
        8077153156180046901,
        3499231286164597752,
        2700106282881469611,
        14679824700835879737,
        14188324938219126828,
        3016120398601032793,
        10858152824243889420,
        9412371965669250534,
        4857522662584941069,
        984331743838900386,
        4094160040294753142,
        2368635764350388458,
        15101240511397838657,
        15584415763303953578,
        7831857200208015446,
        1952643641639729063,
        4184323302594028609,
        16795120381104846695,
        3541559381538365280,
        15408472870896842474,
        5628362450757896366,
        16277348886873708846,
        12437047172652330846,
        10172715019035948149,
        1999700669649752791,
        6217957085626135027,
        11220551167830336823,
        16478747645632411810,
        5437280487207382147,
        11382378739613087836,
        15866932785489521505,
        5502694314775516684,
        16440179278067648435,
        15510104554374162846,
        15722061259110909195,
        10760687291786964354,
        10736868329920212671,
        4166148127664495614,
        14303518358120527892,
        9122250801678898571,
        10028508179936801946,
        216630713752669403,
        10655207865433859491,
        4041437116174699233,
        6280982262534375348,
        297501356638818866,
        13976146806363377485,
        13752396481560145603,
        11472199956603637419,
        16393728429143900496,
        14752844047515986640,
        1524477318846038424,
        6596889774254235440,
        1591982099532234960,
        8065146456116391065,
        3964696017750868345,
        17040425970526664920,
        11511165586176539991,
        3443401252003315103,
        16314977947073778249,
        16860120454903458341,
        5370503221561340846,
        15362920279125264094,
        2822458124714999779,
        14575378304387898337,
        9689406052675046032,
        2872149351415175149,
        13019620945255883050,
        14929026760148695825,
        8503417349692327218,
        9677798905341573754,
        828949921821462483,
        16110482368362750196,
        15794218816553655671,
        14942910774764855088,
        12026350906243760195,
        13610867176871462505,
        18324536557697872582,
        2658962269666727629,
        327225403251576027,
        9207535177029277544,
        8744129291351887858,
        6129603385168921503,
        18385497655031085907,
        13024478718952333892,
        14547683159720717167,
        5932119629366981711,
        325385464632594563,
        3559879386019806291,
        6629264948665231298,
        14358245326238118181,
        15662449672706340765,
        13975503159145803297,
        3609534220891499022,
        4224273587485638227,
        9274084767162416370,
        13156843921244091998,
        18284750575626858789,
        14664767920489118779,
        11292057742031803221,
        13919998707305829132,
        14473305049457001422,
        9696877879685767807,
        1406758246007973837,
        2429517644459056881,
        14361215588101587430,
        11386164476149757528,
        10474116023593331839,
        2921165656527786564,
        15604610369733358953,
        12955027028676000544,
        10314281035410779907,
        3167047178514709947,
        1088721329408346700,
        17930425515478182741,
        7466411836095405617,
        15534027454610690575,
        10879629128927506091,
        11502219301371200635,
        13915106894453889418,
        4226784327815861027,
        12335222183627106346,
        3648499746356007767,
        18441388887898023393,
        18117929843327093625,
        4237736098094830438,
        14229123019768296655,
        3930112058127932690,
        12663879236019645778,
        9281161952002617309,
        4978473890680876319,
        845759387067546611,
        1386164484606776333,
        8008554770639925512,
        11159581016793288971,
        18065390393740782906,
        17647985458967631018,
        9092379465737744314,
        2914678236848656327,
        4376066698447630270,
        16057186499919087528,
        3031333261848790078,
        2926746602873431597,
        7931945763526885287,
        147649915388326849,
        15801792398814946230,
        5265900391686545347,
        16173686275871890830,
        7562781050481886043,
        5853506575839330404,
        14957980734704564792,
        10944286556353523404,
        1783009880614150597,
        9529762028588888983,
        822992871011696119,
        2130074274744257510,
        8000279549284809219,
        3514744284158856431,
        128770032569293263,
        3737367602618100572,
        16364836605077998543,
        783266423471782696,
        4569418252658970391,
        11093950688157406886,
        14888808512267628166,
        4217786261273670948,
        17047486076688645713,
        14133826721458860485,
        17539744882220127106,
        12394675039129853905,
        5757634999463277090,
        9621947619435861331,
        1182210208559436772,
        14603391040490913939,
        17481976703660945893,
        14063388816234683976,
        2046622692581829572,
        8294969799792017441,
        5293778434844788058,
        17976364049306763808,
        399482430848083948,
        16495545010129798933,
        15241340958282367519,
        989828753826900814,
        17616558773874893537,
        2471817920909589004,
        11764082277667899978,
        9618755269550400950,
        1240014743757147125,
        1887649378641563002,
        1842982574728131416,
        13243531042427194002,
        7688268125537013927,
        3080422097287486736,
        2562894809975407783,
        12428984115620094788,
        1355581933694478148,
        9895969242586224966,
        8628445623963160889,
        4298916726468199239,
        12773165416305557280,
        5240726258301567487,
        4975412836403427561,
        1842172398579595303,
        7812151462958058676,
        17974510987263071769,
        14980707022065991200,
        18294903201142729875,
        12911672684850242753,
        8979482998667235743,
        16808468362384462073,
        5981317232108359798,
        12373702800369335100,
        16119707581920094765,
        2782738549717633602,
        15454155188515389391,
        16495638000603654629,
        16348757069342790497,
        7769562861984504567,
        17504300515449231559,
        5557710032938318996,
        11846125204788401203,
        13957316349928882624,
        2738350683717432043,
        15738068448047700954,
        6224714837294524999,
        6081930777706411111,
        11366312928059597928,
        4355315799925031482,
        12393324728734964015,
        15277140291994338591,
        1406052433297386355,
        15859448364509213398,
        1672805458341158435,
        2926095111610982994,
        11056431822276774455,
        12083767323511977430,
        3296968762229741153,
        12312076899982286460,
        17769284994682227273,
        15349428916826953443,
        1056147296359223910,
        18305757538706977431,
        6214378374180465222,
        14279648441175008454,
        17791306410319136644,
        956593013486324072,
        2921235772936241950,
        10002890515925652606,
        10399654693663712506,
        6446247931049971441,
        6380465770144534958,
        11439178472613251620,
        10131486500045494660,
        3692642123868351947,
        10972816599561388940,
        4931112976348785580,
        8213967169213816566,
        15336469859637867841,
        15026830342847689383,
        7524668622380765825,
        17309937346758783807,
        372780684412666438,
        5642417144539399955,
        18303842993081194577,
        11085303253831702827,
        15658163165983586950,
        8517521928922081563,
        16091186344159989860,
        17614656488010863910,
        4736067146481515156,
        13449945221374241354,
        17755469346196579408,
        13300502638545717375,
        6611828134763118043,
        14177591906740276597,
        9340430243077460347,
        7499765399826404087,
        3409518087967832469,
        9013253864026602045,
        4444307427984430192,
        3729283608700519712,
        13642048880719588383,
        16486557958022946240,
        2996465014991157904,
        10020049344596426576,
        12302485648009883778,
        8492591321344423126,
        17407986443716172520,
        10530482934957373052,
        15740662350540828750,
        1790629986901049436,
        6305948377669917188,
        15092985352503125323,
        928505047232899787,
        14404651977039851607,
        7564177565277805597,
        3411236815351677870,
        7752718145953236134,
        12315979971311483798,
        12477729506691004724,
        14654956300924793305,
        6689803038918974388,
        1540738812233000153,
        13508351811701989957,
        15864432023192136053,
        7990997967273843917,
        7424300239290765161,
        39585249496300263,
        3877436595063283319,
        10710642254398044448,
        4653804418844456375,
        1232267496410380283,
        3690525514009038824,
        15459770765077428485,
        13240346522153894145,
        5674964360688390624,
        16973644653010587289,
        15924280764204855206,
        15196708627253442662,
        17596174821341373274,
        16196745023027393691,
        6980050627399795351,
        17582264380857746637,
        18170372407506856324,
        12108126025631005514,
        15687749089493373169,
        5814107289258228434,
        9381977959648494876,
        15895601183088112734,
        16267869075651604263,
        15228381979765852785,
        11949618678312581999,
        4545324791131029438,
        582725409406225185,
        15282520250746126790,
        14758446535973412711,
        7605613563088071833,
        1111140641057375915,
        5364843095234852245,
        218335432181198977,
        4891472444796201742,
        4564628942836375772,
        15500501278323817088,
        4913946328556108657,
        2684786251736694229,
        12090498456116310122,
        5310885782157038567,
        5032788439854011923,
        12627401038822728242,
        11869662610126430929,
        17650156853043540226,
        12126672500118808436,
        10437658933435653256,
        13133995470637873311,
        4601324715591152820,
        1874350460376708372,
        5808688626286061164,
        13777088437302430376,
        5018451954762213522,
        2588296738534474754,
        5503414509154170711,
        5230497186769951796,
        13261090710400573914,
        8515217303152165705,
        11074538219737365303,
        15481562385740613213,
        12705484409881007350,
        14221931471178549498,
        12905633420087112297,
        17337759164357146506,
        14081997515778175224,
        17384320185513122939,
        7131793076779216692,
        17483217190312403109,
        900692047897995877,
        14723287313048560400,
        6132094372965340305,
        7572797575350925726,
        12725160700431903514,
        380860122911632449,
        1900504978569024571,
        8423729759529914138,
        7305587201606052334,
        12446871355267313320,
        4615812356515386206,
        3361817115406652303,
        17690418922000878428,
        14632214537567910559,
        2709702289926174775,
        3459675155951086144,
        7788364399926538150,
        16043992474431955950,
        15830963823784930267,
        4216893617835797954,
        538159724689093771,
        16029152738918251363,
        14444848757576686696,
        12941757045272633696,
        10900480525147953314,
        12547307449905859302,
        16001571796892398181,
        407942194622690676,
        13873235372903944444,
        18071603799493008777,
        1015646077646778622,
        9387605808959554815,
        11566702442022019410,
        7061722181092883183,
        2629032108249254109,
        5271820053177594520,
        12640880742139693547,
        10098688629735675775,
        5716304472850923064,
        3312674502353063071,
        7295926377425759633,
        833281439103466115,
        16316743519466861667,
        9912050326606348167,
        11651133878100804242,
        18026798122431692459,
        6157758321723692663,
        4856021830695749349,
        7074321707293278978,
        10748097797809573561,
        2949954440753264783,
        9813922580940661152,
        9949237950172138336,
        15643982711269455885,
        16078663425810239127,
        12508044395364228880,
        12920301578340189344,
        15368071871011048915,
        1610400750626363239,
        11994736084146033126,
        6042574085746186088,
        4154587549267685807,
        15915752367312946034,
        1191196620621769193,
        467437822242538360,
        2836463788873877488,
        10476401302029164984,
        1716169985450737419,
        5327734953288310341,
        3994170067185955262,
        884431883768190063,
        11019001754831208284,
        14322807384384895215,
        161011537360955545,
        1466223959660131656,
        5227048585229497539,
        12410731857504225031,
        2142243279080761103,
        17682826799106851430,
        1792612570704179953,
        14727410295243056025,
        1459567192481221274,
        5669760721687603135,
        17507918443756456845,
        10354471145847018200,
        10362475129248202288,
        13143844410150939443,
        6861184673150072028,
        18396524361124732580,
        543906666394301875,
        12476817828199026728,
        11853496871128122868,
        12747674713108891748,
        7986179867749890282,
        9158195177777627533,
        2217320706811118570,
        8631389005200569973,
        5538133061362648855,
        3369942850878700758,
        7813559982698427184,
        509051590411815948,
        10197035660403006684,
        13004818533162292132,
        9831652587047067687,
        7619315254749630976,
        994412663058993407
    ];

    #[test]
    fn mersenne_twister_test_32bit_seeded() {
        let mt = MT19937::from_seed_u32(0x12345678u32);
        for (&Wra(x), &y) in mt
            .state
            .iter()
            .zip(MERSENNE_TWISTER_STATE_SEEDED_BY_U32.iter())
        {
            assert!(x == y);
        }
    }

    #[test]
    fn mersenne_twister_test_32bit_slice_seeded() {
        let mt = MT19937::from_seed(&[0x123u32, 0x234u32, 0x345u32, 0x456u32][..]);
        for (&Wra(x), &y) in mt
            .state
            .iter()
            .zip(MERSENNE_TWISTER_STATE_SEEDED_BY_SLICE.iter())
        {
            assert!(x == y);
        }
    }

    #[test]
    fn mersenne_twister_test_32bit_output() {
        let mut mt = MT19937::from_seed(&[0x123u32, 0x234u32, 0x345u32, 0x456u32][..]);
        for x in MERSENNE_TWISTER_TEST_OUTPUT.iter() {
            assert!(mt.next_u32() == *x);
        }
    }

    #[rustfmt::skip]
    const MERSENNE_TWISTER_STATE_SEEDED_BY_U32: [u32; MT19937::N] = [
        305419896,
        775181657,
        499207455,
        1600259134,
        3349832671,
        2158895569,
        3851567941,
        933167269,
        2845216289,
        560713432,
        2837590850,
        1856731211,
        4010544958,
        3935610910,
        4016625791,
        3415983355,
        3013963240,
        561813347,
        3403724065,
        2542053501,
        4110119215,
        3740807793,
        1141434640,
        666176716,
        4158339220,
        1525097132,
        2105164635,
        3200105629,
        119898583,
        623462640,
        4293015246,
        4281226240,
        139575375,
        2656314956,
        1943329512,
        3833597712,
        471604643,
        3060329588,
        1563062452,
        3909244048,
        2167605543,
        621439170,
        3833145012,
        1015362910,
        1202674754,
        3932438940,
        326377,
        3567038236,
        2573315691,
        3669950622,
        3304735523,
        4203256787,
        4126656836,
        443181112,
        3611891278,
        618660248,
        2556623152,
        4274393843,
        1222109418,
        3410077682,
        2539535185,
        3375485692,
        1670100441,
        592926327,
        1073466419,
        402905952,
        160165154,
        2047459501,
        849940512,
        1731493093,
        1757891130,
        3908492430,
        2303162601,
        3679811584,
        3523671161,
        3169435245,
        2821359895,
        3082244758,
        1217448114,
        493615598,
        2715547958,
        1418864085,
        213082358,
        1885529953,
        410495284,
        1093572057,
        3732518542,
        1653701368,
        654558613,
        2890707234,
        1558970874,
        3892910946,
        384153249,
        3787732706,
        2146373667,
        836865993,
        510610349,
        2669899938,
        1419841410,
        1164786194,
        1924207843,
        3996659599,
        1785769634,
        3596558774,
        3297061329,
        2292769347,
        3883732239,
        2879754791,
        4002117125,
        2170078923,
        3320250043,
        1232795399,
        350202830,
        2312242871,
        1348895451,
        544098933,
        915340701,
        929961062,
        1579328180,
        2075135712,
        1486047293,
        224893989,
        2641586195,
        3853527088,
        2171086747,
        1819771098,
        2836924901,
        1293518754,
        2384314063,
        2960325730,
        2366435938,
        3027304547,
        2557480905,
        792125084,
        3825946642,
        1657188412,
        3663670681,
        1311402059,
        2593177532,
        3622458497,
        3191531990,
        1764537649,
        2682924158,
        4036356475,
        660493544,
        905947161,
        1132573551,
        1530112249,
        3751174764,
        906706272,
        2212992886,
        244831579,
        1016193151,
        2922023348,
        108313448,
        70293667,
        2572186603,
        35941514,
        2251992336,
        2940398265,
        1143058279,
        3153185247,
        1282861523,
        3402211965,
        2197064282,
        1894493533,
        977641970,
        3334563617,
        342680338,
        569915587,
        245612697,
        953933320,
        2328420820,
        3069616155,
        396987275,
        2254336390,
        1486777796,
        3684875370,
        820479775,
        4169197294,
        1391128885,
        4197580345,
        3797702552,
        2190312414,
        2825503364,
        3833427351,
        4034369566,
        1147242796,
        3911136381,
        1138304115,
        273310648,
        2529087575,
        622374729,
        1871329678,
        3779018029,
        3388129769,
        2616376342,
        32958633,
        2441821299,
        1113477724,
        634733689,
        4195861894,
        3870825283,
        1274544395,
        4037854142,
        2132041566,
        3115087945,
        2071501158,
        3866994035,
        4079695361,
        1644257692,
        1326680260,
        2152293261,
        4028944192,
        1615176005,
        1470235819,
        537973226,
        475991083,
        2284835025,
        191057690,
        3308855326,
        2122592590,
        1437842441,
        2210494471,
        3903981529,
        1130808291,
        1233992460,
        2997699076,
        2363114306,
        920242469,
        1284778367,
        3407531421,
        3236867646,
        1494508538,
        2926167537,
        1481581770,
        3614910467,
        3731540205,
        3425346772,
        2498435266,
        1044350128,
        1843497569,
        1437137106,
        177739570,
        1288235438,
        136043008,
        279380726,
        3476279813,
        3238073174,
        471342722,
        2875563076,
        3449953945,
        2978774462,
        4225447977,
        4021396368,
        514077950,
        2450970422,
        2929310853,
        1144824133,
        1997866199,
        2763747186,
        2561009717,
        2419789241,
        3317857998,
        254983401,
        2625386998,
        3182588494,
        2259010823,
        1425631493,
        2394264481,
        1192917853,
        1761273947,
        63690386,
        188598955,
        797145481,
        967329056,
        809592500,
        3366967833,
        936310616,
        2859314895,
        862760185,
        960528470,
        3850021128,
        1898485106,
        4146233979,
        699904629,
        19727943,
        2937092642,
        3116060608,
        2330151595,
        3309299407,
        1682783135,
        816977018,
        2324520775,
        145065055,
        2948403618,
        2137429320,
        173799414,
        3719658296,
        3660132978,
        727081153,
        1679980114,
        858790637,
        2833151408,
        4238258794,
        3304428958,
        1967131939,
        1027236253,
        1301317925,
        3815137385,
        3689071880,
        590848398,
        4249467966,
        1165945418,
        1652659153,
        4293501515,
        3472723876,
        3178958112,
        1333879208,
        2465069548,
        2418407974,
        953480565,
        1972598123,
        988352021,
        890162317,
        3995675110,
        3203143071,
        2113965368,
        3931781573,
        3673014887,
        496055998,
        130566209,
        2792770545,
        2465596204,
        553967732,
        3057034003,
        3259592709,
        2350279087,
        589318035,
        453962066,
        2700931246,
        88801585,
        4002525867,
        3668927903,
        3151467492,
        2373808407,
        3885292451,
        2292402043,
        1241117977,
        3345976277,
        2075243212,
        1164329280,
        1326090501,
        1100428277,
        656479398,
        3164863713,
        3711779315,
        520385813,
        2935844783,
        3028002216,
        2685818746,
        568835009,
        4063124879,
        4214150567,
        827002656,
        2274695437,
        1269099353,
        2842358567,
        1431550985,
        4259412121,
        397738036,
        686877175,
        2919399143,
        287809230,
        943711932,
        47490467,
        905876935,
        2550765564,
        1846666928,
        4233870928,
        3780215611,
        3135880853,
        3210215953,
        2841247230,
        995168748,
        3607584669,
        224807128,
        608065211,
        3961474123,
        1579393517,
        858402722,
        1754300017,
        1237046200,
        1903659654,
        2063394765,
        1147642119,
        1631108842,
        368842564,
        3888419682,
        2534674388,
        238929662,
        1188000199,
        2552552112,
        3530656717,
        2235525082,
        2004783565,
        3985224466,
        2040447052,
        2930119929,
        1067293600,
        852953018,
        3490617341,
        889906898,
        2861659255,
        2917699783,
        597527640,
        1403746392,
        2625445310,
        3530184910,
        3608526724,
        2948911335,
        4273207550,
        1479254647,
        1549942837,
        3096128044,
        3619439567,
        3357732134,
        3199426116,
        1445046602,
        1139666756,
        3368965351,
        655459235,
        651176959,
        2141574220,
        1696921875,
        408872909,
        974727829,
        1774881662,
        2248737233,
        3293357302,
        1429680993,
        283485849,
        2867961111,
        3858118660,
        4199603071,
        1472198057,
        4039824646,
        2066266552,
        2189707453,
        3663195164,
        3135619325,
        2347146590,
        3115733776,
        3034671583,
        530647799,
        707298362,
        1716860586,
        2626491968,
        3093371860,
        3239019321,
        2263798190,
        1445054121,
        1564166678,
        1034652642,
        1303913466,
        348423896,
        765119754,
        2836611269,
        3149139799,
        2979105630,
        2441361698,
        1000123255,
        1087592139,
        1146706315,
        1928408908,
        848486460,
        4288058760,
        658334900,
        118034658,
        1858772233,
        3476110856,
        1861115704,
        4220523615,
        3108062767,
        3968452261,
        2218014563,
        2313405483,
        4092942100,
        2701634811,
        1785168166,
        1527043405,
        1679938791,
        1989285546,
        3094443620,
        3253358124,
        3700490618,
        3041810349,
        2929606908,
        2217317416,
        702017669,
        3247182701,
        1118538331,
        3677208952,
        603269758,
        3035181998,
        643592405,
        2360181507,
        1553414752,
        4203672385,
        3647098119,
        706447506,
        2901476761,
        3260295975,
        340216629,
        2446527211,
        293142768,
        3972911284,
        2061912376,
        3331942019,
        1071641223,
        2715152459,
        3036536790,
        3552429230,
        1960456012,
        2759843949,
        1285027032,
        3354049707,
        2267699287,
        1129142425,
        2115325449,
        2808222522,
        2894237483,
        608071233,
        627657402,
        2661156728,
        3534700345,
        445644282,
        4086300603,
        3316735410,
        636793328,
        173254092,
        1867421593,
        1045047574,
        2866347469,
        3424185291,
        2927300617,
        3329243513,
        1667168581,
        2293874168,
        29933511,
        1430661801,
        1008385647,
        260016883,
        2941443848,
        3595852572,
        1172606054,
        757040591,
        2830406616,
        894697776,
        1192700447,
        1082109446,
        2092067316,
        4006276315,
        1756826475,
        1295596806,
        3094271224,
        1586090712,
        1579504340,
        1038134593,
        3475187166,
        3442227051,
        4293953091,
        1568487804,
        882283918,
        1414791492,
        1588948856,
        2391522813,
        3418910428,
        3313637181,
        1433754553,
        2808785372,
        1863242971,
        2327357000,
        1339897721,
        155065504,
        724757865,
        369352119,
        86927998,
        4089410562,
        933515186,
        676836744,
        829974775,
        124689091,
        2664066112,
        3348761180,
        2347495630,
        495398608,
        101894757,
        2558322991,
        1582044696,
        310844213,
        3075480386,
        4025483930,
        3108235704,
        1274397374,
        1684475576,
        915984987,
        2002432838,
        2074786915,
        2816132875,
        2333301231,
        2872922596,
        2773444642,
        267204357,
        3626722399,
        274192051,
        3614605831,
        2245882365,
        72905477,
        1301680228,
        4189947717,
        806672139,
        2761604293,
        3716414450
    ];

    #[rustfmt::skip]
    const MERSENNE_TWISTER_STATE_SEEDED_BY_SLICE: [u32; MT19937::N] = [
        2147483648,
        1827812183,
        1371430253,
        3559376401,
        4152304030,
        3484546413,
        904688886,
        2640105624,
        3033298696,
        3386595201,
        369478181,
        2269089429,
        618892536,
        1404079710,
        2891471128,
        2871169702,
        1020385029,
        3311824836,
        923090660,
        1921041923,
        1544466474,
        685797265,
        2465597578,
        2346973074,
        630894856,
        665182002,
        769175936,
        3017123521,
        3508859727,
        1803296144,
        2059566241,
        4053644259,
        3993140148,
        741891261,
        54278865,
        20043431,
        2445648452,
        1044381999,
        1773042707,
        2768959228,
        1818875112,
        2035786986,
        3458871676,
        4190322778,
        1552412821,
        3743407409,
        921020090,
        3028219647,
        1811282874,
        458436201,
        2261805142,
        3540504881,
        55523394,
        3406035835,
        3643554219,
        160478601,
        3131812209,
        1750246847,
        310524801,
        538838761,
        4097216171,
        1424467795,
        1736964303,
        3924877158,
        4050066274,
        1284818847,
        997608279,
        1743645731,
        3861638089,
        1979190831,
        331968179,
        67771207,
        937697508,
        3340056593,
        752755706,
        1581536688,
        2292813118,
        822270257,
        3518209714,
        3540339067,
        1356302093,
        564364160,
        3439306709,
        4156257291,
        2902329296,
        2676847202,
        199377087,
        2700614214,
        4256495779,
        1042379751,
        1902843850,
        541663347,
        1105719791,
        2055488122,
        1772382387,
        1590461887,
        1096731286,
        4039442187,
        1175370089,
        1659062698,
        53134572,
        2821322629,
        3865246561,
        1928684207,
        2238726924,
        3291877865,
        2486983120,
        2591476417,
        2633030347,
        4263927136,
        3370274455,
        3018969306,
        3342536519,
        1048809092,
        3887576647,
        1798999130,
        1882276042,
        2314104910,
        3303817434,
        2251178951,
        1354109516,
        2944211425,
        542518603,
        3545156308,
        292048272,
        1667455762,
        1824881537,
        2291719689,
        2601744913,
        1475382386,
        2151236187,
        3551355316,
        207179492,
        4025262836,
        4201541508,
        4185568575,
        1371095840,
        2533214650,
        750598898,
        3336127010,
        1112746635,
        2168833184,
        1866663264,
        1008882524,
        705705152,
        434584641,
        3720585473,
        1359539617,
        1186019465,
        2997504282,
        3279906530,
        4174236237,
        1111392757,
        1874728325,
        3994133610,
        855552173,
        1490712571,
        770322226,
        3509743848,
        3097776221,
        1669989606,
        2981948555,
        3420675648,
        763522569,
        1854726402,
        1446282084,
        4210797998,
        3497860296,
        1500567652,
        4170419592,
        375681337,
        1685467682,
        3252917671,
        204735328,
        725724149,
        86204629,
        3407749819,
        1497038849,
        1240663743,
        1497563373,
        330463645,
        678281313,
        555587055,
        3420977290,
        3864978040,
        2598258963,
        88433849,
        706471606,
        2204253466,
        1207243547,
        479433004,
        2525229949,
        3011716495,
        3622461821,
        2931310287,
        994916916,
        3209595751,
        3887340275,
        1441571561,
        2496624432,
        3592967859,
        2170622192,
        3964102663,
        1750936864,
        4286251765,
        2410873793,
        4056435468,
        3778832465,
        3568403537,
        3195560039,
        2447945345,
        2289664522,
        3125246309,
        3254932065,
        3412281324,
        1070323682,
        1454196965,
        1242606593,
        2025763526,
        2480282382,
        1785523412,
        1678120983,
        3466302448,
        913688339,
        2335682621,
        2870884017,
        3943203012,
        3376940353,
        821708821,
        5329814,
        2050965739,
        4012960695,
        4026282590,
        848005093,
        2090115245,
        1732838459,
        1701934203,
        2618985574,
        2392637351,
        3610308264,
        1162509741,
        3772926898,
        4026399774,
        2801305136,
        2182020938,
        2540720293,
        4177612013,
        3758227323,
        2141839466,
        3457019126,
        690868322,
        598123635,
        4220136616,
        2063722767,
        534543515,
        3995640444,
        3697772838,
        605496025,
        194542699,
        4283492525,
        3414550867,
        2944993929,
        3138370086,
        2273260021,
        1368435547,
        328762456,
        2810028600,
        3571321502,
        1782649452,
        4008389438,
        3374096016,
        2070297302,
        3548106024,
        406229528,
        420474145,
        1345435476,
        1454548380,
        2158312864,
        1379619651,
        1353546123,
        3811653577,
        882683258,
        2752377205,
        3614226931,
        1500298293,
        2610950419,
        1253921430,
        2107280447,
        2276719522,
        1296486334,
        3787958895,
        3076802280,
        1113584194,
        1511963190,
        4162049235,
        3993023547,
        3616161164,
        1305747926,
        3972166487,
        1967370814,
        920085398,
        3066264196,
        3270634177,
        116308049,
        3500602755,
        2095466291,
        374997835,
        4013819058,
        294797265,
        2531304952,
        1915167960,
        667114423,
        33740368,
        2659595205,
        1992038463,
        1788663246,
        1032288339,
        2725176344,
        965149701,
        2340916620,
        2880875099,
        90563045,
        550093497,
        2205859613,
        4113574329,
        2611773242,
        6224964,
        2216769577,
        2724275975,
        1825208654,
        1095989352,
        1353654145,
        4130469231,
        2872700633,
        3968090132,
        3983530071,
        3891778552,
        253511543,
        3451123488,
        1858275584,
        2348219340,
        4164791526,
        1546492002,
        2318605776,
        1965910834,
        4016688232,
        1661025458,
        2551621891,
        2559017942,
        2999442539,
        2626132036,
        3855956683,
        889284004,
        4228792998,
        2508936804,
        2464411834,
        3126525029,
        1845662917,
        1099875911,
        230942152,
        1316977638,
        4287590380,
        3960960001,
        2035696777,
        2084606597,
        4185117397,
        272555796,
        1438814277,
        3792058704,
        2373818687,
        328461098,
        1933025545,
        478993165,
        2186693443,
        2504363491,
        2844647904,
        4178236473,
        174820621,
        3894751753,
        3928736686,
        691843130,
        3709350628,
        2757608178,
        1391782179,
        1043240547,
        2220523142,
        2016183159,
        2906513762,
        3465827756,
        3911890461,
        2425950392,
        948237040,
        3362307558,
        826526964,
        1022776727,
        1602110624,
        495555482,
        3374275041,
        1251359676,
        1255187341,
        2187964004,
        2260892791,
        2998084135,
        1359605011,
        1974780261,
        150018524,
        729982456,
        538716187,
        2451949310,
        1404163987,
        323166556,
        3575751708,
        912151627,
        1062492739,
        136196234,
        1525463811,
        3934317698,
        4059639798,
        1714397141,
        3799270074,
        3933323871,
        1950899325,
        2202877835,
        512028145,
        121304123,
        1747320652,
        4025527049,
        3203512622,
        370863179,
        1383153679,
        338573713,
        843668046,
        3786076594,
        3761568863,
        1943691400,
        4239756727,
        2866888284,
        927687523,
        2835168303,
        3639022486,
        4177667412,
        2454774443,
        3330293413,
        1073705099,
        489962519,
        2122918676,
        3091912613,
        2087072392,
        2474785306,
        4196422017,
        1950304138,
        1417647053,
        3170449575,
        2871308877,
        2834888397,
        2515213887,
        706488188,
        2765291661,
        3342253292,
        946613144,
        2657539519,
        1870033541,
        2568978334,
        2381242604,
        2390291123,
        1426830313,
        1033183417,
        1865206616,
        3909956281,
        3229647106,
        567876042,
        2632601739,
        1787091399,
        1136358267,
        1707922556,
        3600383805,
        83493536,
        3720481151,
        1860566046,
        1457764290,
        1087693608,
        2574737982,
        3472233887,
        1946429651,
        657205714,
        1561347349,
        3458704973,
        658970395,
        2666292445,
        4010435611,
        2923502084,
        2919668932,
        1447403386,
        272213229,
        2379902797,
        856095986,
        390957008,
        316624381,
        37938916,
        1312588871,
        3443811924,
        3563720170,
        681138701,
        3713652810,
        1229426900,
        45899309,
        3319920329,
        3184643346,
        1733808374,
        3218014532,
        4131837143,
        2708745467,
        1925606777,
        1070300412,
        1857066639,
        231709688,
        89357594,
        2807557743,
        4246955725,
        2648639203,
        4014481964,
        3609309784,
        3413370774,
        3362710738,
        4117303240,
        2975382313,
        4244728709,
        676814731,
        1401643182,
        4193290992,
        1880982784,
        3412352641,
        432923266,
        3204217730,
        3640767186,
        2748687591,
        3238328348,
        1816348975,
        3454683239,
        1788280760,
        2390076397,
        583783115,
        749971462,
        2070386333,
        3684914363,
        2505473379,
        3781484919,
        3251603932,
        1061410633,
        2657465574,
        1047386942,
        598203491,
        3802852895,
        3892183081,
        650367471,
        1888164348,
        3790664944,
        3285152048,
        1772040010,
        2779620173,
        262034140,
        4011996451,
        172805695,
        3112617504,
        3698026131,
        2749738982,
        1338645063,
        2883589338,
        1171912066,
        1463032348,
        2303251030,
        1690714656,
        87045526,
        3931593098,
        1973669665,
        2196833368,
        3131780013,
        2099423072,
        3143196216,
        2732157577,
        3060002362,
        3279855788,
        2424755944,
        3186596011,
        892164315,
        1948474334,
        1752877034,
        3954052922,
        2895910728,
        2605843797,
        41504255,
        2282306723,
        2818684947,
        2301112141,
        125160123,
        16831279,
        2001639563,
        2988100720,
        2804013521,
        1917204704,
        2217119131,
        747297802,
        57526359,
        1150692435,
        1127421285,
        1638007393,
        2357393576,
        1363062508,
        112227006,
        1305326547,
        2699963315,
        3027707384,
        2567899981,
        539524824,
        1322391149,
        4115045373,
        2610809222,
        1511354791,
        1747171732,
        2430429081,
        2427698197,
        668479568,
        1616806017,
        77518867
    ];

    #[rustfmt::skip]
    const MERSENNE_TWISTER_TEST_OUTPUT: [u32; 1000] = [
        1067595299,
        955945823,
        477289528,
        4107218783,
        4228976476,
        3344332714,
        3355579695,
        227628506,
        810200273,
        2591290167,
        2560260675,
        3242736208,
        646746669,
        1479517882,
        4245472273,
        1143372638,
        3863670494,
        3221021970,
        1773610557,
        1138697238,
        1421897700,
        1269916527,
        2859934041,
        1764463362,
        3874892047,
        3965319921,
        72549643,
        2383988930,
        2600218693,
        3237492380,
        2792901476,
        725331109,
        605841842,
        271258942,
        715137098,
        3297999536,
        1322965544,
        4229579109,
        1395091102,
        3735697720,
        2101727825,
        3730287744,
        2950434330,
        1661921839,
        2895579582,
        2370511479,
        1004092106,
        2247096681,
        2111242379,
        3237345263,
        4082424759,
        219785033,
        2454039889,
        3709582971,
        835606218,
        2411949883,
        2735205030,
        756421180,
        2175209704,
        1873865952,
        2762534237,
        4161807854,
        3351099340,
        181129879,
        3269891896,
        776029799,
        2218161979,
        3001745796,
        1866825872,
        2133627728,
        34862734,
        1191934573,
        3102311354,
        2916517763,
        1012402762,
        2184831317,
        4257399449,
        2899497138,
        3818095062,
        3030756734,
        1282161629,
        420003642,
        2326421477,
        2741455717,
        1278020671,
        3744179621,
        271777016,
        2626330018,
        2560563991,
        3055977700,
        4233527566,
        1228397661,
        3595579322,
        1077915006,
        2395931898,
        1851927286,
        3013683506,
        1999971931,
        3006888962,
        1049781534,
        1488758959,
        3491776230,
        104418065,
        2448267297,
        3075614115,
        3872332600,
        891912190,
        3936547759,
        2269180963,
        2633455084,
        1047636807,
        2604612377,
        2709305729,
        1952216715,
        207593580,
        2849898034,
        670771757,
        2210471108,
        467711165,
        263046873,
        3569667915,
        1042291111,
        3863517079,
        1464270005,
        2758321352,
        3790799816,
        2301278724,
        3106281430,
        7974801,
        2792461636,
        555991332,
        621766759,
        1322453093,
        853629228,
        686962251,
        1455120532,
        957753161,
        1802033300,
        1021534190,
        3486047311,
        1902128914,
        3701138056,
        4176424663,
        1795608698,
        560858864,
        3737752754,
        3141170998,
        1553553385,
        3367807274,
        711546358,
        2475125503,
        262969859,
        251416325,
        2980076994,
        1806565895,
        969527843,
        3529327173,
        2736343040,
        2987196734,
        1649016367,
        2206175811,
        3048174801,
        3662503553,
        3138851612,
        2660143804,
        1663017612,
        1816683231,
        411916003,
        3887461314,
        2347044079,
        1015311755,
        1203592432,
        2170947766,
        2569420716,
        813872093,
        1105387678,
        1431142475,
        220570551,
        4243632715,
        4179591855,
        2607469131,
        3090613241,
        282341803,
        1734241730,
        1391822177,
        1001254810,
        827927915,
        1886687171,
        3935097347,
        2631788714,
        3905163266,
        110554195,
        2447955646,
        3717202975,
        3304793075,
        3739614479,
        3059127468,
        953919171,
        2590123714,
        1132511021,
        3795593679,
        2788030429,
        982155079,
        3472349556,
        859942552,
        2681007391,
        2299624053,
        647443547,
        233600422,
        608168955,
        3689327453,
        1849778220,
        1608438222,
        3968158357,
        2692977776,
        2851872572,
        246750393,
        3582818628,
        3329652309,
        4036366910,
        1012970930,
        950780808,
        3959768744,
        2538550045,
        191422718,
        2658142375,
        3276369011,
        2927737484,
        1234200027,
        1920815603,
        3536074689,
        1535612501,
        2184142071,
        3276955054,
        428488088,
        2378411984,
        4059769550,
        3913744741,
        2732139246,
        64369859,
        3755670074,
        842839565,
        2819894466,
        2414718973,
        1010060670,
        1839715346,
        2410311136,
        152774329,
        3485009480,
        4102101512,
        2852724304,
        879944024,
        1785007662,
        2748284463,
        1354768064,
        3267784736,
        2269127717,
        3001240761,
        3179796763,
        895723219,
        865924942,
        4291570937,
        89355264,
        1471026971,
        4114180745,
        3201939751,
        2867476999,
        2460866060,
        3603874571,
        2238880432,
        3308416168,
        2072246611,
        2755653839,
        3773737248,
        1709066580,
        4282731467,
        2746170170,
        2832568330,
        433439009,
        3175778732,
        26248366,
        2551382801,
        183214346,
        3893339516,
        1928168445,
        1337157619,
        3429096554,
        3275170900,
        1782047316,
        4264403756,
        1876594403,
        4289659572,
        3223834894,
        1728705513,
        4068244734,
        2867840287,
        1147798696,
        302879820,
        1730407747,
        1923824407,
        1180597908,
        1569786639,
        198796327,
        560793173,
        2107345620,
        2705990316,
        3448772106,
        3678374155,
        758635715,
        884524671,
        486356516,
        1774865603,
        3881226226,
        2635213607,
        1181121587,
        1508809820,
        3178988241,
        1594193633,
        1235154121,
        326117244,
        2304031425,
        937054774,
        2687415945,
        3192389340,
        2003740439,
        1823766188,
        2759543402,
        10067710,
        1533252662,
        4132494984,
        82378136,
        420615890,
        3467563163,
        541562091,
        3535949864,
        2277319197,
        3330822853,
        3215654174,
        4113831979,
        4204996991,
        2162248333,
        3255093522,
        2219088909,
        2978279037,
        255818579,
        2859348628,
        3097280311,
        2569721123,
        1861951120,
        2907080079,
        2719467166,
        998319094,
        2521935127,
        2404125338,
        259456032,
        2086860995,
        1839848496,
        1893547357,
        2527997525,
        1489393124,
        2860855349,
        76448234,
        2264934035,
        744914583,
        2586791259,
        1385380501,
        66529922,
        1819103258,
        1899300332,
        2098173828,
        1793831094,
        276463159,
        360132945,
        4178212058,
        595015228,
        177071838,
        2800080290,
        1573557746,
        1548998935,
        378454223,
        1460534296,
        1116274283,
        3112385063,
        3709761796,
        827999348,
        3580042847,
        1913901014,
        614021289,
        4278528023,
        1905177404,
        45407939,
        3298183234,
        1184848810,
        3644926330,
        3923635459,
        1627046213,
        3677876759,
        969772772,
        1160524753,
        1522441192,
        452369933,
        1527502551,
        832490847,
        1003299676,
        1071381111,
        2891255476,
        973747308,
        4086897108,
        1847554542,
        3895651598,
        2227820339,
        1621250941,
        2881344691,
        3583565821,
        3510404498,
        849362119,
        862871471,
        797858058,
        2867774932,
        2821282612,
        3272403146,
        3997979905,
        209178708,
        1805135652,
        6783381,
        2823361423,
        792580494,
        4263749770,
        776439581,
        3798193823,
        2853444094,
        2729507474,
        1071873341,
        1329010206,
        1289336450,
        3327680758,
        2011491779,
        80157208,
        922428856,
        1158943220,
        1667230961,
        2461022820,
        2608845159,
        387516115,
        3345351910,
        1495629111,
        4098154157,
        3156649613,
        3525698599,
        4134908037,
        446713264,
        2137537399,
        3617403512,
        813966752,
        1157943946,
        3734692965,
        1680301658,
        3180398473,
        3509854711,
        2228114612,
        1008102291,
        486805123,
        863791847,
        3189125290,
        1050308116,
        3777341526,
        4291726501,
        844061465,
        1347461791,
        2826481581,
        745465012,
        2055805750,
        4260209475,
        2386693097,
        2980646741,
        447229436,
        2077782664,
        1232942813,
        4023002732,
        1399011509,
        3140569849,
        2579909222,
        3794857471,
        900758066,
        2887199683,
        1720257997,
        3367494931,
        2668921229,
        955539029,
        3818726432,
        1105704962,
        3889207255,
        2277369307,
        2746484505,
        1761846513,
        2413916784,
        2685127085,
        4240257943,
        1166726899,
        4215215715,
        3082092067,
        3960461946,
        1663304043,
        2087473241,
        4162589986,
        2507310778,
        1579665506,
        767234210,
        970676017,
        492207530,
        1441679602,
        1314785090,
        3262202570,
        3417091742,
        1561989210,
        3011406780,
        1146609202,
        3262321040,
        1374872171,
        1634688712,
        1280458888,
        2230023982,
        419323804,
        3262899800,
        39783310,
        1641619040,
        1700368658,
        2207946628,
        2571300939,
        2424079766,
        780290914,
        2715195096,
        3390957695,
        163151474,
        2309534542,
        1860018424,
        555755123,
        280320104,
        1604831083,
        2713022383,
        1728987441,
        3639955502,
        623065489,
        3828630947,
        4275479050,
        3516347383,
        2343951195,
        2430677756,
        635534992,
        3868699749,
        808442435,
        3070644069,
        4282166003,
        2093181383,
        2023555632,
        1568662086,
        3422372620,
        4134522350,
        3016979543,
        3259320234,
        2888030729,
        3185253876,
        4258779643,
        1267304371,
        1022517473,
        815943045,
        929020012,
        2995251018,
        3371283296,
        3608029049,
        2018485115,
        122123397,
        2810669150,
        1411365618,
        1238391329,
        1186786476,
        3155969091,
        2242941310,
        1765554882,
        279121160,
        4279838515,
        1641578514,
        3796324015,
        13351065,
        103516986,
        1609694427,
        551411743,
        2493771609,
        1316337047,
        3932650856,
        4189700203,
        463397996,
        2937735066,
        1855616529,
        2626847990,
        55091862,
        3823351211,
        753448970,
        4045045500,
        1274127772,
        1124182256,
        92039808,
        2126345552,
        425973257,
        386287896,
        2589870191,
        1987762798,
        4084826973,
        2172456685,
        3366583455,
        3602966653,
        2378803535,
        2901764433,
        3716929006,
        3710159000,
        2653449155,
        3469742630,
        3096444476,
        3932564653,
        2595257433,
        318974657,
        3146202484,
        853571438,
        144400272,
        3768408841,
        782634401,
        2161109003,
        570039522,
        1886241521,
        14249488,
        2230804228,
        1604941699,
        3928713335,
        3921942509,
        2155806892,
        134366254,
        430507376,
        1924011722,
        276713377,
        196481886,
        3614810992,
        1610021185,
        1785757066,
        851346168,
        3761148643,
        2918835642,
        3364422385,
        3012284466,
        3735958851,
        2643153892,
        3778608231,
        1164289832,
        205853021,
        2876112231,
        3503398282,
        3078397001,
        3472037921,
        1748894853,
        2740861475,
        316056182,
        1660426908,
        168885906,
        956005527,
        3984354789,
        566521563,
        1001109523,
        1216710575,
        2952284757,
        3834433081,
        3842608301,
        2467352408,
        3974441264,
        3256601745,
        1409353924,
        1329904859,
        2307560293,
        3125217879,
        3622920184,
        3832785684,
        3882365951,
        2308537115,
        2659155028,
        1450441945,
        3532257603,
        3186324194,
        1225603425,
        1124246549,
        175808705,
        3009142319,
        2796710159,
        3651990107,
        160762750,
        1902254979,
        1698648476,
        1134980669,
        497144426,
        3302689335,
        4057485630,
        3603530763,
        4087252587,
        427812652,
        286876201,
        823134128,
        1627554964,
        3745564327,
        2589226092,
        4202024494,
        62878473,
        3275585894,
        3987124064,
        2791777159,
        1916869511,
        2585861905,
        1375038919,
        1403421920,
        60249114,
        3811870450,
        3021498009,
        2612993202,
        528933105,
        2757361321,
        3341402964,
        2621861700,
        273128190,
        4015252178,
        3094781002,
        1621621288,
        2337611177,
        1796718448,
        1258965619,
        4241913140,
        2138560392,
        3022190223,
        4174180924,
        450094611,
        3274724580,
        617150026,
        2704660665,
        1469700689,
        1341616587,
        356715071,
        1188789960,
        2278869135,
        1766569160,
        2795896635,
        57824704,
        2893496380,
        1235723989,
        1630694347,
        3927960522,
        428891364,
        1814070806,
        2287999787,
        4125941184,
        3968103889,
        3548724050,
        1025597707,
        1404281500,
        2002212197,
        92429143,
        2313943944,
        2403086080,
        3006180634,
        3561981764,
        1671860914,
        1768520622,
        1803542985,
        844848113,
        3006139921,
        1410888995,
        1157749833,
        2125704913,
        1789979528,
        1799263423,
        741157179,
        2405862309,
        767040434,
        2655241390,
        3663420179,
        2172009096,
        2511931187,
        1680542666,
        231857466,
        1154981000,
        157168255,
        1454112128,
        3505872099,
        1929775046,
        2309422350,
        2143329496,
        2960716902,
        407610648,
        2938108129,
        2581749599,
        538837155,
        2342628867,
        430543915,
        740188568,
        1937713272,
        3315215132,
        2085587024,
        4030765687,
        766054429,
        3517641839,
        689721775,
        1294158986,
        1753287754,
        4202601348,
        1974852792,
        33459103,
        3568087535,
        3144677435,
        1686130825,
        4134943013,
        3005738435,
        3599293386,
        426570142,
        754104406,
        3660892564,
        1964545167,
        829466833,
        821587464,
        1746693036,
        1006492428,
        1595312919,
        1256599985,
        1024482560,
        1897312280,
        2902903201,
        691790057,
        1037515867,
        3176831208,
        1968401055,
        2173506824,
        1089055278,
        1748401123,
        2941380082,
        968412354,
        1818753861,
        2973200866,
        3875951774,
        1119354008,
        3988604139,
        1647155589,
        2232450826,
        3486058011,
        3655784043,
        3759258462,
        847163678,
        1082052057,
        989516446,
        2871541755,
        3196311070,
        3929963078,
        658187585,
        3664944641,
        2175149170,
        2203709147,
        2756014689,
        2456473919,
        3890267390,
        1293787864,
        2830347984,
        3059280931,
        4158802520,
        1561677400,
        2586570938,
        783570352,
        1355506163,
        31495586,
        3789437343,
        3340549429,
        2092501630,
        896419368,
        671715824,
        3530450081,
        3603554138,
        1055991716,
        3442308219,
        1499434728,
        3130288473,
        3639507000,
        17769680,
        2259741420,
        487032199,
        4227143402,
        3693771256,
        1880482820,
        3924810796,
        381462353,
        4017855991,
        2452034943,
        2736680833,
        2209866385,
        2128986379,
        437874044,
        595759426,
        641721026,
        1636065708,
        3899136933,
        629879088,
        3591174506,
        351984326,
        2638783544,
        2348444281,
        2341604660,
        2123933692,
        143443325,
        1525942256,
        364660499,
        599149312,
        939093251,
        1523003209,
        106601097,
        376589484,
        1346282236,
        1297387043,
        764598052,
        3741218111,
        933457002,
        1886424424,
        3219631016,
        525405256,
        3014235619,
        323149677,
        2038881721,
        4100129043,
        2851715101,
        2984028078,
        1888574695,
        2014194741,
        3515193880,
        4180573530,
        3461824363,
        2641995497,
        3179230245,
        2902294983,
        2217320456,
        4040852155,
        1784656905,
        3311906931,
        87498458,
        2752971818,
        2635474297,
        2831215366,
        3682231106,
        2920043893,
        3772929704,
        2816374944,
        309949752,
        2383758854,
        154870719,
        385111597,
        1191604312,
        1840700563,
        872191186,
        2925548701,
        1310412747,
        2102066999,
        1504727249,
        3574298750,
        1191230036,
        3330575266,
        3180292097,
        3539347721,
        681369118,
        3305125752,
        3648233597,
        950049240,
        4173257693,
        1760124957,
        512151405,
        681175196,
        580563018,
        1169662867,
        4015033554,
        2687781101,
        699691603,
        2673494188,
        1137221356,
        123599888,
        472658308,
        1053598179,
        1012713758,
        3481064843,
        3759461013,
        3981457956,
        3830587662,
        1877191791,
        3650996736,
        988064871,
        3515461600,
        4089077232,
        2225147448,
        1249609188,
        2643151863,
        3896204135,
        2416995901,
        1397735321,
        3460025646
    ];
}
